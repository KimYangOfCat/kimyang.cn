---
title: "11 ä¸ªè®©ä½ æƒŠå¹çš„ç½•è§ JavaScript å•è¡Œä»£ç "
date: 2021-08-22
tags: [JavaScript]
categories: [ğŸŒ ç¿»è¯‘æ ¡å¯¹]
---

![](https://picbed.kimyang.cn/202109050843757.jpeg)

å¦‚æœä½ æƒ³ç»™ä¸“ä¸šå¼€å‘äººå‘˜ç•™ä¸‹æ·±åˆ»å°è±¡ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿè¿™å¾ˆç®€å•ï¼šç”¨ç®€æ˜“çš„ç­–ç•¥å’Œå°½é‡å°‘çš„ä»£ç æ¥è§£å†³ä¸€ä¸ªå¤æ‚çš„éš¾é¢˜ã€‚éšç€ ES6 å¼•å…¥äº†ç®­å¤´å‡½æ•°åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºçœ‹èµ·æ¥ä¼˜é›…åˆç®€å•çš„å•è¡Œä»£ç ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæ‚¨å°†å­¦ä¹  11 ç§ç½•è§ä½†åŠŸèƒ½å¼ºå¤§çš„å•è¡Œä»£ç ã€‚é‚£ä¹ˆï¼Œå‡†å¤‡å¥½ï¼Œè®©æˆ‘ä»¬ä»ç¬¬ä¸€ä¸ªå¼€å§‹å§ï¼
<!-- more -->

## 1. è·å–å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°

è·å–å­—ç¬¦æ•°æ˜¯ä¸€ä¸ªå¾ˆå®ç”¨çš„åŠŸèƒ½ï¼Œåœ¨è®¸å¤šåœºæ™¯ä¸‹éƒ½å¾ˆé€‚ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥è·å–ç©ºæ ¼æ•°å’Œéšåçš„å•è¯æ•°ï¼Œæˆ–è€…ç”¨äºè·å–å­—ç¬¦ä¸²ä¸­æŸä¸ªåˆ†éš”ç¬¦çš„ç»Ÿè®¡æ¬¡æ•°ã€‚

![](https://picbed.kimyang.cn/202109050843469.png)

```js
const characterCount = (str, char) => str.split(char).length - 1
```

è¿™ä¸ªæƒ³æ³•éå¸¸ç®€å•ã€‚æˆ‘ä»¬ä½¿ç”¨ä¼ é€’çš„å‚æ•° `char` æ‹†åˆ†å­—ç¬¦ä¸²å¹¶è·å¾—è¿”å›æ•°ç»„çš„é•¿åº¦ã€‚åœ¨æ¯ä¸€æ¬¡åˆ†å‰²å­—ç¬¦ä¸²æ—¶ï¼Œç»“æœéƒ½ä¼šæ¯”åˆ†å‰²ç¬¦å¤š 1ã€‚å‡å» 1ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ª `characterCount` çš„å•è¡Œä»£ç ã€‚

## 2. æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ºç©º

æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ºç©ºå®é™…ä¸Šæ¯”æƒ³åƒä¸­è¦å›°éš¾å¾—å¤šã€‚å³ä½¿å¯¹è±¡ä¸ºç©ºï¼Œä½†æ¯æ¬¡æ£€æŸ¥è¯¥å¯¹è±¡æ˜¯å¦ç­‰äº `{}` éƒ½ä¼šè¿”å› `false`ã€‚

å¹¸è¿çš„æ˜¯ï¼Œä¸‹é¢çš„å•è¡Œä»£ç å®ç°äº†æˆ‘ä»¬æƒ³è¦å®Œæˆçš„äº‹ã€‚

![](https://picbed.kimyang.cn/202109050843123.png)

```js
const isEmpty = obj => Reflect.ownKeys(obj).length === 0 && obj.constructor === Object
```

åœ¨è¿™ä¸€è¡Œä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥å¯¹è±¡çš„é”®çš„é•¿åº¦æ˜¯å¦ç­‰äº 0ï¼Œä»¥åŠä¼ é€’çš„å‚æ•°æ˜¯å¦ä¸ºå¯¹è±¡ã€‚

## 3. ç­‰å¾…ä¸€å®šæ—¶é—´åæ‰§è¡Œ

åœ¨è¿™ä¸ªå•è¡Œä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†æ¥è§¦ä¸€äº›ç®€å•çš„å¼‚æ­¥ç¼–ç¨‹æ¦‚å¿µã€‚åœ¨è¿è¡Œä»£ç æ—¶ï¼Œå¦‚æœä½ æƒ³ç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼Œè¿™æ˜¯ `wait` çš„å•è¡Œä»£ç ï¼š

![](https://picbed.kimyang.cn/202109050843684.png)

```js
const wait = async (milliseconds) => new Promise((resolve) => setTimeout(resolve, milliseconds));
```

åœ¨ `wait` è¿™ä¸ªå•è¡Œä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Promise å¯¹è±¡å¹¶åœ¨ç»™å®šçš„æ—¶é—´åä½¿ç”¨ `setTimeout` å‡½æ•°å®Œæˆå®ƒã€‚

## 4. è·å–ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®

åœ¨å¼€å‘ Web åº”ç”¨ç¨‹åºæ—¶ï¼Œæ—¥æœŸé€šå¸¸æ˜¯æœ€å®¹æ˜“ä»¤äººæ··æ·†çš„éƒ¨åˆ†ï¼Œå› ä¸ºè¿™é‡Œæœ‰å¾ˆå¤šå®¹æ˜“å¯¼è‡´è¯¯ç®—çš„æ¦‚å¿µã€‚

è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å•è¡Œä»£ç æ¥è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®ã€‚ä½†è¿™è¿˜æ²¡ç»“æŸã€‚å’Œæˆ‘ä¸€æ ·ï¼Œä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„å•è¡Œä»£ç æ¥è®¡ç®—æœˆæ•°å·®ã€å¹´æ•°å·®ç­‰ã€‚

![](https://picbed.kimyang.cn/202109050844934.png)

```js
const daysBetween = (date1, date2) => Math.ceil(Math.abs(date1 - date2) / (1000 * 60 * 60 * 24))
```

è¿™ä¸ªå•è¡Œä»£ç èƒŒåçš„é€»è¾‘å¾ˆå®¹æ˜“ç†è§£ã€‚å½“ä¸¤ä¸ªæ—¥æœŸç›¸å‡æ—¶ï¼Œå·®å€¼ä»¥æ¯«ç§’ä¸ºå•ä½è¿”å›ã€‚è¦å°†æ¯«ç§’è½¬æ¢ä¸ºå¤©ï¼Œæˆ‘ä»¬å¿…é¡»å°†å…¶é™¤ä»¥æ¯«ç§’ã€ç§’ã€åˆ†é’Ÿå’Œå°æ—¶ã€‚

## 5. é‡å®šå‘åˆ°å¦ä¸€ä¸ª URL

å¦‚æœä½ æ›¾ç»åˆ›å»ºè¿‡ä¸€ä¸ªçœŸå®çš„ç½‘ç«™ï¼Œæˆ‘æ•¢è‚¯å®šä½ ä¼šé‡åˆ°èº«ä»½éªŒè¯é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œéç®¡ç†å‘˜ç”¨æˆ·ä¸åº”è¯¥èƒ½å¤Ÿè®¿é—® `/admin` è·¯ç”±ã€‚å¦‚æœç”¨æˆ·å°è¯•è®¿é—®å®ƒï¼Œé‚£ä¹ˆä½ å¿…é¡»å°†å…¶é‡å®šå‘åˆ°å¦ä¸€ä¸ª URLã€‚

è¿™ä¸ªå•è¡Œä»£ç æ­£å¥½é€‚ç”¨äºæˆ‘ä¸Šé¢æåˆ°çš„æƒ…å†µï¼Œä½†æˆ‘è®¤ä¸ºä½ å¯ä»¥æ‰¾åˆ°æ›´å¤šçš„ä½¿ç”¨åœºæ™¯ã€‚

![](https://picbed.kimyang.cn/202109050844703.png)

```js
const redirect = url => location.href = url
```

`location` æ˜¯å…¨å±€ `window` å¯¹è±¡ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè®¾ç½® `href` å±æ€§çš„è¡Œä¸ºä¸ç”¨æˆ·å•å‡»é“¾æ¥çš„è¡Œä¸ºç›¸åŒã€‚

## 6. æ£€æŸ¥è®¾å¤‡æ˜¯å¦æ”¯æŒè§¦å±

éšç€å¯ä»¥è¿æ¥åˆ°äº’è”ç½‘çš„è®¾å¤‡è¶Šæ¥è¶Šå¤šï¼Œåˆ›å»ºå“åº”å¼ç½‘ç«™çš„å¿…è¦æ€§ä¹Ÿè¶Šæ¥è¶Šé«˜ã€‚20 å¹´å‰ï¼Œå¼€å‘è€…åº”è¯¥è€ƒè™‘è¿‡æ¡Œé¢ç‰ˆç½‘ç«™ï¼Œä½†ä»Šå¤©è¶…è¿‡ 50% çš„ç½‘ç»œæµé‡æ¥è‡ªè§¦æ‘¸è®¾å¤‡ã€‚å› æ­¤ï¼Œé‡‡å–ä¸€äº›è¡ŒåŠ¨ä»¥æ”¯æŒè®¾å¤‡çš„è§¦å±æ˜¯éå¸¸é‡è¦çš„ã€‚

![](https://picbed.kimyang.cn/202109050844994.png)

```js
const touchSupported = () => ('ontouchstart' in window || DocumentTouch && document instanceof DocumentTouch)
```

åœ¨è¿™ä¸€è¡Œä¸­ï¼Œæˆ‘ä»¬åœ¨æ£€æŸ¥ `document` æ˜¯å¦æ”¯æŒ `touchstart` äº‹ä»¶ã€‚

## 7. åœ¨å…ƒç´ åæ’å…¥ä¸€ä¸² HTML

åœ¨å¼€å‘ Web åº”ç”¨ç¨‹åºæ—¶ï¼Œä½¿ç”¨ JavaScript æ›´æ–° DOM æ˜¯ä¸€ä»¶å¾ˆå¸¸è§çš„äº‹æƒ…ã€‚JavaScript å†…ç½®çš„ä¸€äº›åŸºæœ¬çš„æ–¹æ³•å¯ä»¥å®Œæˆè¿™é¡¹ä»»åŠ¡ï¼Œä½†æ˜¯å½“æƒ…å†µå˜å¾—å¤æ‚æ—¶ï¼Œäº‹æƒ…å°±å˜å¾—å¾ˆéš¾å…‹æœã€‚

è¿™æ˜¯åœ¨ HTML å…ƒç´ ä¹‹åç«‹å³æ³¨å…¥ä¸€ä¸² HTML çš„å•è¡Œä»£ç ã€‚é€šè¿‡å‡ åˆ†é’Ÿçš„æ€è€ƒå’Œè°·æ­Œæœç´¢ï¼Œæˆ‘ç›¸ä¿¡ä½ å¯ä»¥æ‰¾åˆ°è¿™ä¸ªå•è¡Œ**ä¹‹å‰**çš„ç‰ˆæœ¬ã€‚

![](https://picbed.kimyang.cn/202109050844114.png)

```js
const insertHTMLAfter = (html, el) => el.insertAdjacentHTML('afterend', html)
```

## 8.  æ‰“ä¹±æ•°ç»„

åœ¨å¼€å‘ä¸­ï¼Œæ‰“ä¹±ä¸€ç»„æ•°æ®æ˜¯ä½ éšæ—¶å¯èƒ½é‡åˆ°çš„å¸¸è§æƒ…å†µï¼Œä¸å¹¸çš„æ˜¯ï¼ŒJavaScript ä¸­æ²¡æœ‰å†…ç½®è¿™ç§æ–¹æ³•ã€‚

ä¸ºæ­¤ï¼Œè¿™é‡Œæä¾›äº†ä¸€ä¸ªèƒ½è®©ä½ å¯ä»¥æ¯å¤©ä½¿ç”¨çš„å•è¡Œ `shuffle` ä»£ç ï¼š

![](https://picbed.kimyang.cn/202109050844705.png)

```js
const shuffle = arr => arr.sort(() => 0.5 - Math.random())
```

å®ƒåˆ©ç”¨äº†æ•°ç»„çš„ `sort` æ–¹æ³•ï¼Œé€šè¿‡åœ¨å‰ä¸€ä¸ªå…ƒç´ çš„ä¹‹å‰æˆ–ä¹‹åæ’å…¥ä¸‹ä¸€ä¸ªå…ƒç´ æ¥è¿›è¡Œéšæœºæ’åºã€‚

## 9. åœ¨ç½‘é¡µä¸Šè·å–é€‰å®šçš„æ–‡æœ¬

æµè§ˆå™¨åœ¨å…¨å±€ `windows` å¯¹è±¡ä¸Šæœ‰ä¸€ä¸ªåä¸º `getSelection` çš„å†…ç½®æ–¹æ³•ã€‚ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå•è¡Œä»£ç ï¼Œè¿”å›ç½‘é¡µä¸Šè¢«æ¡†é€‰çš„æ–‡æœ¬ã€‚

![](https://picbed.kimyang.cn/202109050844142.png)

```js
const getSelectedText = () => window.getSelection().toString()
```

## 10. è·å–ä¸€ä¸ªéšæœºå¸ƒå°”å€¼

åœ¨ç¼–ç¨‹æ—¶ï¼Œå°¤å…¶æ˜¯åœ¨ç¼–å†™æ¸¸æˆæ—¶ï¼Œæœ‰æ—¶ä½ ä¼šæƒ³è¦æŸäº›è¡Œä¸ºè¢«éšæœºçš„æ‰§è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸‹é¢çš„å•è¡Œä»£ç è®©äº‹æƒ…å˜å¾—éå¸¸æ–¹ä¾¿ã€‚

![](https://picbed.kimyang.cn/202109050844129.png)

```js
const getRandomBoolean = () => Math.random() >= 0.5
```

ä¸Šé¢çš„ä»£ç æœ‰ 50/50 çš„æœºä¼šè¿”å› `true` æˆ– `false`ï¼Œå› ä¸ºç”Ÿæˆçš„éšæœºæ•°å¤§äº 0.5 çš„æ¦‚ç‡ç­‰äºå°äº 0.5 çš„æ¦‚ç‡ã€‚

ä½†æ˜¯ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ æƒ³è·å¾—ä¸€ä¸ªæ¦‚ç‡ä¸º 70% `false` çš„éšæœºå¸ƒå°”å€¼ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ç®€å•åœ°å°† 0.5 æ›´æ”¹ä¸º 0.7ï¼Œä¾æ­¤ç±»æ¨ã€‚

## 11. è®¡ç®—æ•°ç»„çš„å¹³å‡å€¼

è®¡ç®—æ•°ç»„çš„å¹³å‡å€¼æœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œä½†æ¯ä¸ªçš„é€»è¾‘éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä½ å¿…é¡»è·å¾—æ•°ç»„çš„æ€»å’ŒåŠå…¶é•¿åº¦ï¼Œç„¶åç›¸é™¤å¾—å‡ºå¹³å‡å€¼ã€‚

![](https://picbed.kimyang.cn/202109050844041.png)

```js
const average = (arr) => arr.reduce((a, b) => a + b) / arr.length
```

åœ¨ `average` è¿™ä¸ªå•è¡Œä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `reduce` ä»¥ä¾¿èƒ½åªç”¨ä¸€è¡Œå°±è·å–åˆ°æ•°ç»„çš„æ€»å’Œï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¾ªç¯ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å…¶é™¤ä»¥æ•°ç»„é•¿åº¦ï¼Œè¿™å°±æ˜¯æ•°ç»„çš„å¹³å‡å€¼ã€‚

---

å°±è¿™äº›äº†ï¼Œå¤§å®¶ï¼ç°åœ¨ä½ å·²ç»äº†è§£äº† 11 ä¸ªç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„ JavaScript å•è¡Œä»£ç ã€‚æˆ‘è¯•ç€é€‰æ‹©äº†é‚£äº›ä¸æ˜¯å¾ˆçŸ¥åçš„ä»£ç ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å­¦ä¹ æ–°ä¸œè¥¿ã€‚æˆ‘æ¯å¤©éƒ½åœ¨ä½¿ç”¨å®ƒä»¬ï¼Œæˆ‘æƒ³ä½ ä¹Ÿä¼šã€‚

æ„Ÿè°¢ä½ çš„é˜…è¯»ã€‚å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè®°å¾—ç‚¹èµã€‚å¦‚æœä½ å¯¹è¿™ç¯‡æ–‡ç« æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Œè¯·ç•™è¨€ã€‚ä¸‹ä¸€ç¯‡æ–‡ç« è§ã€‚

---
 * åŸæ–‡åœ°å€ï¼š[11 Rare JavaScript One-Liners That Will Amaze You](https://betterprogramming.pub/11-rare-javascript-one-liners-that-will-amaze-you-331659832301)
 * åŸæ–‡ä½œè€…ï¼š[Can Durmus](https://medium.com/@candurmuss)
 * è¯‘æ–‡å‡ºè‡ªï¼š[æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
 * æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[https://github.com/xitu/gold-miner/blob/master/article/2021/11-rare-javascript-one-liners-that-will-amaze-you.md](https://github.com/xitu/gold-miner/blob/master/article/2021/11-rare-javascript-one-liners-that-will-amaze-you.md)
 * è¯‘è€…ï¼š[jaredliw](https://github.com/jaredliw)
 * æ ¡å¯¹è€…ï¼š[Zæ‹›é”¦](https://github.com/zenblofe)ã€[Kim Yang](https://github.com/KimYangOfCat)