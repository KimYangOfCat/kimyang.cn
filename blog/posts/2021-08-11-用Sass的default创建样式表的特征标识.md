---
title: "ç”¨ Sass çš„ !default åˆ›å»ºæ ·å¼è¡¨çš„ç‰¹å¾æ ‡è¯†"
date: 2021-08-11
tags: [Sass]
categories: [ðŸŒ ç¿»è¯‘æ ¡å¯¹]
---
`!default` æ˜¯ä¸€ä¸ª Sass æ ‡å¿—ï¼Œè¡¨æ˜Žå¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œ **æ¡ä»¶èµ‹å€¼** â€”â€” åªæœ‰åœ¨å˜é‡æœªå®šä¹‰æˆ–ä¸º `null` æ—¶æ‰èµ‹å€¼ã€‚ä¾‹å¦‚ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼š

```scss
$variable: 'test' !default;
```

å¯¹äºŽ Sass ç¼–è¯‘å™¨æ¥è¯´ï¼Œè¿™ä¸€è¡Œè¡¨ç¤ºï¼š

> **ä»…å½“** `$variable` æ²¡æœ‰è¢«èµ‹å€¼æ—¶ï¼Œå°† `'test'` èµ‹å€¼ç»™ `$variable`ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªåä¾‹ï¼Œè¯´æ˜Žäº† `!default` æ ‡å¿—çš„æ¡ä»¶èµ‹å€¼è¡Œä¸ºçš„å¦ä¸€ç§æƒ…å†µï¼š

```scss
$variable: 'hello world';
$variable: 'test' !default;
// $variable ä»ç„¶ä¸º `hello world`
```

è¿è¡Œè¿™ä¸¤è¡ŒåŽï¼Œ`$variable` çš„å€¼ä»ç„¶æ˜¯ç¬¬ 1 è¡ŒåŽŸå§‹èµ‹å€¼çš„ `'hello world'`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¬¬ 2 è¡Œä¸­ `!default` çš„èµ‹å€¼å°†è¢«å¿½ç•¥ï¼Œå› ä¸ºå·²ç»æä¾›äº†ä¸€ä¸ªå€¼ï¼Œå°±ä¸éœ€è¦é»˜è®¤å€¼ã€‚

## æ ·å¼åº“å’Œ `@use...with`

Sass ä¸­çš„ `!default` ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿æ ·å¼åº“çš„ä½¿ç”¨ï¼Œå¹¶æ–¹ä¾¿åœ°å°†å®ƒä»¬åŒ…å«åˆ°ä¸‹æ¸¸åº”ç”¨ç¨‹åºæˆ–é¡¹ç›®ä¸­ã€‚é€šè¿‡å°†ä¸€äº›å˜é‡æŒ‡å®šä¸º `!default`ï¼Œæ ·å¼åº“å¯ä»¥å…è®¸å¯¼å…¥çš„åº”ç”¨ç¨‹åºè‡ªå®šä¹‰æˆ–è°ƒæ•´è¿™äº›å˜é‡å€¼ï¼Œè€Œä¸éœ€è¦å†å®Œå…¨åœ° fork ä¸€ä»½æ ·å¼åº“ã€‚æ¢å¥è¯è¯´ï¼Œ`!default` çš„å˜é‡æœ¬è´¨ä¸Šæ˜¯ä½œä¸ºä¿®æ”¹æ ·å¼åº“ä»£ç è¡Œä¸ºçš„ *å‚æ•°*ã€‚


Sass æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºŽæ­¤ç›®çš„çš„ç‰¹æ®Šè¯­æ³•ï¼Œå®ƒå°†æ ·å¼è¡¨ä¸Žç›¸å…³çš„å˜é‡ç»„åˆåœ¨ä¸€èµ·ï¼š

```scss
// style.scss
@use 'library' with (
  $foo: 'hello',
  $bar: 'world'
);
```

è¿™ä¸ªè¯­å¥çš„åŠŸèƒ½ *å‡ ä¹Ž* ç›¸åŒäºŽå˜é‡èµ‹å€¼åŽè·Ÿä¸€ä¸ª `@import`ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```scss
// style.scss - ä¸€ç§ä¸å¤ªå¸¸ç”¨çš„å¯¼å…¥ `library.scss` é…ç½®çš„æ–¹å¼
$foo: 'hello';
$bar: 'world';
@import 'library';
```

è¿™é‡Œé‡è¦çš„åŒºåˆ«ä»¥åŠåŽŸå› æ˜¯ï¼Œå…³äºŽè¦†ç›–çš„**èŒƒå›´**ï¼Œ `@use...with` æ˜¯å¯è‡ªå–çš„ã€‚ `with` ä»£ç å—è®© Sass ç¼–è¯‘å™¨å’Œä»»ä½•é˜…è¯»æºä»£ç çš„äººéƒ½æ¸…æ¥šåœ°çŸ¥é“ï¼Œè¿™äº›è¦†ç›–ä»…ä»…é€‚ç”¨äºŽåœ¨ `library.scss` ä¸­å®šä¹‰å’Œä½¿ç”¨çš„å˜é‡ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•å¯ä»¥ä¿æŒå…¨å±€ä½œç”¨åŸŸçš„æ•´æ´ï¼Œå¹¶æœ‰åŠ©äºŽå‡å°‘ä¸åŒåº“ä¹‹é—´çš„å˜é‡å‘½åå†²çªã€‚

## æœ€å¸¸ç”¨çš„ä¾‹å­ï¼šè‡ªå®šä¹‰ä¸»é¢˜

```scss
// library.scss
$color-primary: royalblue !default;
$color-secondary: salmon !default;


// style.scss
@use 'library' with (
  $color-primary: seagreen,
  $color-secondary: lemonchiffon
);
```

è¿™ä¸€ç‰¹æ€§æœ€å¸¸è§çš„ä¾‹å­ä¹‹ä¸€æ˜¯ **ä¸»é¢˜** çš„å®žçŽ°ã€‚ä¸»é¢˜è‰²å¯ä»¥ç”¨ Sass å˜é‡æ¥å®šä¹‰ï¼Œç„¶åŽç”¨ `!default` å…è®¸è‡ªå®šä¹‰çš„ä¸»é¢˜è‰²ï¼Œä¸ºå…¶ä»–æ ·å¼å…œåº•ï¼ˆç”šè‡³åŒ…æ‹¬æ··åˆæˆ–è¦†ç›–è¿™äº›é¢œè‰²ï¼‰ã€‚

Bootstrap ä½¿ç”¨ `!default` æ ‡å¿—è®¾ç½®æ¯ä¸€é¡¹å˜é‡ï¼Œæ¥å¯¼å‡ºå®ƒçš„[æ•´ä¸ª Sass å˜é‡ API](https://github.com/twbs/bootstrap/blob/main/scss/_variables.scss)ï¼ŒåŒ…æ‹¬ä¸»é¢˜è°ƒè‰²æ¿ï¼Œä»¥åŠå…¶ä»–å…±äº«å€¼ï¼Œå¦‚é—´è·ï¼Œè¾¹æ¡†ï¼Œå­—ä½“è®¾ç½®ï¼Œç”šè‡³åŠ¨ç”»æ¸å˜æ–¹æ³•å’Œæ—¶é—´ã€‚è¿™æ˜¯ `!default` æä¾›çš„çµæ´»æ€§çš„æœ€å¥½ä¾‹å­ä¹‹ä¸€ï¼Œå³ä½¿æ˜¯åœ¨ä¸€ä¸ªéžå¸¸å…¨é¢çš„æ ·å¼æ¡†æž¶ä¸­ã€‚

åœ¨çŽ°ä»£ç½‘ç»œåº”ç”¨ä¸­ï¼Œè¿™ç§è¡Œä¸ºæœ¬èº«å°±å¯ä»¥è¢«[CSS ç”¨æˆ·å±žæ€§](https://css-tricks.com/a-complete-guide-to-custom-properties/)å’Œ[å›žé€€å‚æ•°](https://css-tricks.com/a-complete-guide-to-custom-properties/#h-custom-property-fallbacks)å¤åˆ¶ä½¿ç”¨ã€‚å¦‚æžœæ‚¨çš„å·¥å…·é“¾è¿˜æ²¡æœ‰ä½¿ç”¨ Sassï¼Œé‚£ä¹ˆçŽ°ä»£ CSS å¯èƒ½å·²ç»è¶³å¤Ÿç”¨äºŽä¸»é¢˜åŒ–çš„ç›®çš„ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å°†æ£€æŸ¥é‚£äº›åªèƒ½ä½¿ç”¨ Sass `!default` çš„ä¸¤ä¸ªä¾‹å­ã€‚

## ç”¨ä¾‹ 2ï¼šåŠ è½½ç½‘é¡µå­—ä½“

```scss
// library.scss
$disable-font-cdn: false !default;
@if not $disable-font-cdn {
    @import url('https://fonts.googleapis.com/css2?family=Public+Sans&display=swap');
}

// style.scss
@use 'library' with (
  $disable-font-cdn: true
);
// æ²¡æœ‰é¢å¤–çš„ http è¯·æ±‚
```

å½“ Sass åœ¨ CSS ç”Ÿå‘½å‘¨æœŸä¸­åˆ©ç”¨å®ƒçš„é¢„å¤„ç†å™¨æ—¶ï¼Œå®ƒå¼€å§‹æ˜¾ç¤ºå®ƒçš„ä¼˜åŠ¿ã€‚å‡è®¾ä½ å…¬å¸è®¾è®¡ç³»ç»Ÿçš„æ ·å¼åº“ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ç½‘é¡µå­—ä½“ã€‚å®ƒä»Žè°·æ­Œçš„ CDN åŠ è½½â€”â€”ç†æƒ³çš„æƒ…å†µæ˜¯å°½å¿«å¾—åˆ°èµ„æºâ€”â€”ä½†å°½ç®¡å¦‚æ­¤ï¼Œä½ å…¬å¸çš„ä½“éªŒå›¢é˜Ÿå¯¹é¡µé¢åŠ è½½æ—¶é—´ä»ç„¶éžå¸¸å…³å¿ƒï¼›æ¯ä¸€æ¯«ç§’å¯¹äºŽä»–ä»¬çš„åº”ç”¨æ¥è¯´éƒ½å¾ˆé‡è¦ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥åœ¨ä½ çš„æ ·å¼åº“ä¸­å¼•å…¥ä¸€ä¸ªå¯é€‰çš„ **å¸ƒå°”** æ ‡å¿—ï¼ˆä¸Žç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„ CSS é¢œè‰²å€¼ç•¥æœ‰ä¸åŒï¼‰ã€‚å½“é»˜è®¤å€¼è®¾ç½®ä¸º `false` æ—¶ï¼Œä½ å¯ä»¥åœ¨ Sass `@if` è¯­å¥ä¸­æ£€æŸ¥è¿™ä¸ªç‰¹æ€§æ ‡å¿—ï¼Œç„¶åŽå†è¿è¡Œæ¶ˆè€—è¾ƒå¤§çš„æ“ä½œï¼Œæ¯”å¦‚å¤–éƒ¨ HTTP è¯·æ±‚ã€‚ä½ çš„åº“çš„æ™®é€šç”¨æˆ·ç”šè‡³ä¸éœ€è¦çŸ¥é“è¿™ä¸ªé€‰é¡¹çš„å­˜åœ¨â€”â€”ä¸ºä»–ä»¬å·¥ä½œæä¾›é»˜è®¤è¡Œä¸ºï¼Œä»–ä»¬è‡ªåŠ¨ä»Ž CDN åŠ è½½å­—ä½“ï¼Œè€Œå…¶ä»–å›¢é˜Ÿå¯ä»¥è®¿é—®åˆ‡æ¢ä»–ä»¬éœ€è¦çš„ï¼Œä»¥å¾®è°ƒå’Œä¼˜åŒ–é¡µé¢åŠ è½½ã€‚

ä¸€ä¸ª CSS å˜é‡ä¸è¶³ä»¥è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”å°½ç®¡ `font-family` å¯ä»¥è¢«è¦†ç›–ï¼Œä½† HTTP è¯·æ±‚åŠ è½½äº†æœªä½¿ç”¨çš„å­—ä½“ã€‚

## ç”¨ä¾‹ 3ï¼šè°ƒè¯•é—´éš”æ ‡è®°å¯è§†åŒ–

![](https://i1.wp.com/css-tricks.com/wp-content/uploads/2021/05/sass-default-visually-debugging.png?resize=1808%2C468&ssl=1)

[æŸ¥çœ‹æ¼”ç¤º](https://codepen.io/nathanbabcock/project/editor/AYYygg)

`!default` çš„ç‰¹æ€§æ ‡å¿—ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºè°ƒè¯•å·¥å…·ï¼Œä»¥ä¾¿åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå¯è§†åŒ–è°ƒè¯•å·¥å…·ä¸ºé—´è·æ ‡è®°åˆ›å»ºé¢œè‰²ç¼–ç çš„è¦†ç›–ã€‚è¯¥åŸºç¡€æ˜¯ä¸€ç»„æ ¹æ®â€œTæ¤å°ºå¯¸â€ï¼ˆå³â€œxsâ€æˆ–â€œæœ€å°ç â€åˆ°â€œxlâ€/â€œè¶…å¤§ç â€ï¼‰å‡æ ¼å®šä¹‰çš„é—´è·æ ‡è®°ã€‚ä»Žè¿™ä¸ªå•ä¸€çš„æ ‡è®°é›†åˆï¼ŒSass `@each` å¾ªçŽ¯ç”Ÿæˆå®žç”¨ç¨‹åºç±»çš„æ¯ä¸ªç»„åˆï¼Œå°†ç‰¹å®šæ ‡å¿—åº”ç”¨äºŽæ¯è¾¹ï¼ˆåˆ†åˆ«ä¸ºä¸Šã€å³ã€ä¸‹å’Œå·¦ï¼Œæˆ–åŒæ—¶åº”ç”¨æ‰€æœ‰å››ä¸ªï¼‰çš„ padding æˆ– marginã€‚

å› ä¸ºè¿™äº›é€‰æ‹©å™¨éƒ½æ˜¯åœ¨åµŒå¥—å¾ªçŽ¯ä¸­åŠ¨æ€æž„é€ çš„ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ª `!default` æ ‡å¿—å¯ä»¥å°†æ¸²æŸ“è¡Œä¸ºä»Žæ ‡å‡†ï¼ˆmargin åŠ  paddingï¼‰åˆ‡æ¢åˆ°å½©è‰²è°ƒè¯•è§†å›¾ï¼ˆç›¸åŒçš„å°ºå¯¸ä½¿ç”¨ç›¸åŒå¤§å°çš„é€æ˜Žè¾¹æ¡†ï¼‰ã€‚è¿™ç§é¢œè‰²ç¼–ç çš„è§†å›¾å¯èƒ½çœ‹èµ·æ¥éžå¸¸ç±»ä¼¼äºŽè®¾è®¡å¸ˆç§»äº¤ç»™å¼€å‘çš„å¯äº¤ä»˜æˆæžœå’Œçº¿æ¡†å›¾â€”â€”ç‰¹åˆ«æ˜¯å¦‚æžœä½ å·²ç»å¯¹è®¾è®¡å’Œå¼€å‘ä»¬å…±äº«äº†ç›¸åŒçš„é—´è·å€¼ã€‚å°†è§†è§‰è°ƒè¯•è§†å›¾ä¸Žæ¨¡åž‹å¹¶æŽ’å¯ä»¥å¿«é€Ÿç›´è§‚åœ°å‘çŽ°å·®å¼‚ï¼Œä»¥åŠè°ƒè¯•æ›´å¤æ‚çš„æ ·å¼é—®é¢˜ï¼Œå¦‚[margin å¡Œé™·](https://css-tricks.com/what-you-should-know-about-collapsing-margins/)è¡Œä¸ºã€‚

å†æ¬¡è¯´æ˜Žâ€”â€”å½“æ­¤ä»£ç è¢«ç¼–è¯‘ä¸ºç”Ÿäº§ä»£ç æ—¶ï¼Œè°ƒè¯•å¯è§†åŒ–å°†ä¸ä¼šå‡ºçŽ°åœ¨ç»“æžœ CSS ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œå› ä¸ºå®ƒå°†è¢«ç›¸åº”çš„ margin æˆ– padding è¯­å¥å®Œå…¨å–ä»£ã€‚

## è¿›ä¸€æ­¥é˜…è¯»

è¿™äº›åªæ˜¯ Sass `!default` çš„å‡ ä¸ªä¾‹å­ã€‚å½“ä½ å°†è¯¥æŠ€æœ¯åº”ç”¨äºŽè‡ªå·±çš„é¡¹ç›®æ—¶ï¼Œè¯·å‚è€ƒè¿™äº›æ–‡æ¡£èµ„æºå’Œä½¿ç”¨ç¤ºä¾‹ã€‚

* [`!default` æ–‡æ¡£](https://sass-lang.com/documentation/variables#default-values)
* [`@use with` æ–‡æ¡£](https://sass-lang.com/documentation/at-rules/use#configuration)
* [Bootstrap ä¸­çš„å˜é‡é»˜è®¤å€¼](https://getbootstrap.com/docs/4.0/getting-started/theming/#variable-defaults)
* [ä¸€ä¸ª Sass `default` ä½¿ç”¨æ¡ˆä¾‹](https://thoughtbot.com/blog/sass-default) (thoughtbot)

> * åŽŸæ–‡åœ°å€ï¼š[Creating Stylesheet Feature Flags With Sass !default](https://css-tricks.com/creating-stylesheet-feature-flags-with-sass-default/)
> * åŽŸæ–‡ä½œè€…ï¼š[Nathan Babcock](https://css-tricks.com/author/nathanbabcock/)
> * è¯‘æ–‡å‡ºè‡ªï¼š[æŽ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
> * æœ¬æ–‡æ°¸ä¹…é“¾æŽ¥ï¼š[https://github.com/xitu/gold-miner/blob/master/article/2021/creating-stylesheet-feature-flags-with-sass-default.md](https://github.com/xitu/gold-miner/blob/master/article/2021/creating-stylesheet-feature-flags-with-sass-default.md)
> * è¯‘è€…ï¼š[Gesj-yean](https://github.com/Gesj-yean)
> * æ ¡å¯¹è€…ï¼š[KimYangOfCat](https://github.com/KimYangOfCat) [nia3y](https://github.com/nia3y)