(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{645:function(t,s,a){"use strict";a.r(s);var e=a(6),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("äº†è§£åŒæºç­–ç•¥å’Œ CORS çš„å†å²å’Œæ¼”å˜ï¼Œæ·±å…¥äº†è§£ CORS å’Œå„ç§è·¨åŸŸè®¿é—®çš„ç±»å‹ï¼Œå¹¶å­¦ä¹ ï¼ˆä¸€äº›ï¼‰æœ€ä½³å®è·µã€‚")]),t._v(" "),a("h2",{attrs:{id:"è¯‘è€…æ³¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¯‘è€…æ³¨"}},[t._v("#")]),t._v(" è¯‘è€…æ³¨ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æœ¬ç¯‡ä¸­ä½¿ç”¨çš„æµè§ˆå™¨ä¸º FireFox æµè§ˆå™¨ï¼Œä»£ç æ¼”ç¤ºç»“æœå’Œ Chrome æµè§ˆå™¨ç­‰ç•¥æœ‰å·®åˆ«ã€‚")]),t._v(" "),a("li",[t._v("åç«¯ nodejs ç‰ˆæœ¬ä»£ç å¯ä»¥åœ¨"),a("a",{attrs:{href:"https://github.com/snowyYU/Deep-dive-in-CORS-BK-Code",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™é‡Œ"),a("OutboundLink")],1),t._v("æŸ¥çœ‹ã€‚")])]),t._v(" "),a("h2",{attrs:{id:"æµè§ˆå™¨æ§åˆ¶å°å¸¸è§çš„æŠ¥é”™ä¿¡æ¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æµè§ˆå™¨æ§åˆ¶å°å¸¸è§çš„æŠ¥é”™ä¿¡æ¯"}},[t._v("#")]),t._v(" æµè§ˆå™¨æ§åˆ¶å°å¸¸è§çš„æŠ¥é”™ä¿¡æ¯")]),t._v(" "),a("blockquote",[a("p",[t._v("No â€˜Access-Control-Allow-Originâ€™ header is present on the requested resource.")])]),t._v(" "),a("blockquote",[a("p",[t._v("Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at "),a("a",{attrs:{href:"https://example.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://example.com/"),a("OutboundLink")],1)])]),t._v(" "),a("blockquote",[a("p",[t._v("Access to fetch at â€˜"),a("a",{attrs:{href:"https://example.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://example.com"),a("OutboundLink")],1),t._v("â€™ from origin â€˜http://localhost:3000â€™ has been blocked by CORS policy.")])]),t._v(" "),a("p",[t._v("è¿™äº›æŠ¥é”™ä½ è‚¯å®šè§åˆ°è¿‡ï¼Œæ²¡è§è¿‡çš„è¯ä¹Ÿæ²¡å…³ç³»ï¼Œä¸‹æ–‡ä¼šå‡ºç°å¾ˆå¤š CORS ç›¸å…³çš„é”™è¯¯ä¿¡æ¯ä¾›ä½ å‚è€ƒã€‚")]),t._v(" "),a("p",[t._v("çœ‹åˆ°è¿™äº›æŠ¥é”™æ€»ä¼šä½¿äººç‰¹åˆ«çƒ¦èºã€‚ä¸è¿‡å¹³å¿ƒè€Œè®ºï¼ŒCORS ç»å¯¹æ˜¯ä¸ªç‰¹åˆ«æœ‰ç”¨çš„æœºåˆ¶ï¼Œå¯ä»¥æœ‰æ•ˆçš„è§„é¿åç«¯æœåŠ¡å› é…ç½®ä¸Šçš„é—®é¢˜å¯¼è‡´çš„æ¼æ´ï¼Œé˜²æ­¢æ¶æ„æ”»å‡»ï¼Œæ¨åŠ¨ web æ ‡å‡†çš„æ¼”åŒ–ã€‚")]),t._v(" "),a("p",[t._v("è®©æˆ‘ä»¬ä»å¤´è¯´èµ·å§")]),t._v(" "),a("h2",{attrs:{id:"ä»ç¬¬ä¸€ä¸ªå­èµ„æºçš„è¯ç”Ÿè¯´èµ·"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»ç¬¬ä¸€ä¸ªå­èµ„æºçš„è¯ç”Ÿè¯´èµ·"}},[t._v("#")]),t._v(" ä»ç¬¬ä¸€ä¸ªå­èµ„æºçš„è¯ç”Ÿè¯´èµ·")]),t._v(" "),a("p",[t._v("å­èµ„æºæ˜¯ä¸€ä¸ª HTML å…ƒç´ ï¼Œé€šå¸¸è¢«åµŒå…¥åˆ°æ–‡æ¡£æµä¸­ï¼Œæˆ–è€…åœ¨ç›¸å…³ä¸Šä¸‹æ–‡ä¸­è¢«æ‰§è¡Œï¼ˆæ¯”å¦‚ "),a("code",[t._v("<script>")]),t._v(" æ ‡ç­¾ï¼‰ã€‚"),a("a",{attrs:{href:"http://1997.webhistory.org/www.lists/www-talk.1993q1/0182.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("1993 å¹´"),a("OutboundLink")],1),t._v("ï¼Œç¬¬ä¸€ä¸ªå­èµ„æº "),a("code",[t._v("<img>")]),t._v(" è¢«å¼•å…¥è¿›æ¥ã€‚éšç€ "),a("code",[t._v("<img>")]),t._v(" æ ‡ç­¾çš„å¼•å…¥ï¼Œç½‘ç«™å¾—ä»¥å˜å¾—æ›´åŠ ç¾è§‚ï¼Œå½“ç„¶ï¼Œä¹Ÿæ˜¯ä»è¿™æ—¶èµ·ï¼Œç½‘ç«™å¼€å§‹å˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/meet-img.png",alt:"å›é¦– 1993"}})]),t._v(" "),a("p",[t._v("ä½ å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæµè§ˆå™¨éœ€è¦æ¸²æŸ“ä¸€ä¸ªå¸¦æœ‰ "),a("code",[t._v("<img>")]),t._v(" æ ‡ç­¾çš„é¡µé¢ï¼Œå®ƒä¼šä»ä¸€ä¸ªåœ°æ–¹è·å–ç›¸å…³çš„å­"),a("strong",[t._v("èµ„æº")]),t._v("ã€‚å½“æµè§ˆå™¨å‘èµ·èµ„æºè¯·æ±‚æ—¶ï¼Œå‘èµ·è¯·æ±‚åœ°å€ç›¸è¾ƒäºç›®æ ‡åœ°å€ï¼Œå¦‚æœåè®®ã€åŸŸåã€ç«¯å£å·ä¸‰è€…ä¸­æœ‰ä¸€ä¸ªæˆ–è€…ä¸€ä¸ªä»¥ä¸Šä¸ç›¸åŒå½“è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚å°±æ˜¯"),a("strong",[t._v("è·¨åŸŸè¯·æ±‚")]),t._v("ã€‚")]),t._v(" "),a("h3",{attrs:{id:"æºå’Œè·¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æºå’Œè·¨åŸŸ"}},[t._v("#")]),t._v(" æºå’Œè·¨åŸŸ")]),t._v(" "),a("p",[t._v("ä¸€ä¸ªå®Œæ•´çš„æºç”±ä¸‰è€…ç»„æˆï¼šåè®®ã€åˆè§„çš„åŸŸåå’Œç«¯å£ï¼Œæ¯”å¦‚è¯´ï¼Œ"),a("code",[t._v("http://example.com")]),t._v(" å’Œ "),a("code",[t._v("https://example.com")]),t._v(" ä¸¤è€…æ˜¯ä¸åŒçš„æº â€”â€” ç¬¬ä¸€ä¸ªä½¿ç”¨ "),a("code",[t._v("http")]),t._v(" åè®®è€Œç¬¬äºŒä¸ªä½¿ç”¨ "),a("code",[t._v("https")]),t._v(" åè®®ã€‚ æ­¤å¤–ï¼Œ"),a("code",[t._v("http")]),t._v(" é»˜è®¤ä½¿ç”¨ 80 ç«¯å£ï¼Œè€Œ"),a("code",[t._v("https")]),t._v(" é»˜è®¤ä½¿ç”¨ 443 ç«¯å£ã€‚è™½ç„¶åŸŸåéƒ½æ˜¯ "),a("code",[t._v("example.com")]),t._v(" ï¼Œä½†å®ƒä»¬æœ‰ç€ä¸åŒçš„åè®®å’Œç«¯å£ï¼Œæ‰€ä»¥å±äºä¸åŒçš„æºã€‚")]),t._v(" "),a("p",[t._v("æ‡‚äº†å§ â€”â€” ä¸Šæ–‡æåˆ°çš„ä¸‰ä¸ªå› ç´ ä¸­åªè¦æœ‰ä¸€ä¸ªä¸ä¸€è‡´ï¼Œé‚£å®ƒä»¬çš„æºå°±ä¸æ˜¯åŒä¸€ä¸ªã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å°† "),a("code",[t._v("https://blog.example.com/posts/foo.html")]),t._v(" å’Œå¦‚ä¸‹çš„ URL åšä¸ªå¯¹æ¯”ï¼Œæ˜¯å¦åŒæºä¸€ç›®äº†ç„¶ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("URL")]),t._v(" "),a("th",[t._v("Result")]),t._v(" "),a("th",[t._v("Reason")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("https://blog.example.com/posts/bar.html")])]),t._v(" "),a("td",[t._v("åŒæº")]),t._v(" "),a("td",[t._v("åªæœ‰è·¯å¾„ä¸åŒ")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("https://blog.example.com/contact.html")])]),t._v(" "),a("td",[t._v("åŒæº")]),t._v(" "),a("td",[t._v("åªæœ‰è·¯å¾„ä¸åŒ")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("http://blog.example.com/posts/bar.html")])]),t._v(" "),a("td",[t._v("ä¸åŒæº")]),t._v(" "),a("td",[t._v("ä¸åŒåè®®")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("https://blog.example.com:8080/posts/bar.html")])]),t._v(" "),a("td",[t._v("ä¸åŒæº")]),t._v(" "),a("td",[t._v("ä¸åŒç«¯å£ ("),a("code",[t._v("https://")]),t._v(" é»˜è®¤ä¸º 443 ç«¯å£)")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("https://example.com/posts/bar.html")])]),t._v(" "),a("td",[t._v("ä¸åŒæº")]),t._v(" "),a("td",[t._v("ä¸åŒä¸»æœºå")])])])]),t._v(" "),a("p",[t._v("ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜è·¨åŸŸè¯·æ±‚ï¼Œå‡å¦‚ "),a("code",[t._v("http://example.com/posts/bar.html")]),t._v(" è¿™ä¸ªé¡µé¢å°è¯•å»æ¸²æŸ“æ¥è‡ª "),a("code",[t._v("https://example.com")]),t._v(" è¿™ä¸ªåœ°å€çš„èµ„æºï¼Œé‚£ä¹ˆå°±äº§ç”Ÿäº†è·¨åŸŸè¯·æ±‚ï¼ˆæ³¨æ„å®ƒä»¬çš„åè®®ä¸åŒï¼‰ã€‚")]),t._v(" "),a("h3",{attrs:{id:"è·¨åŸŸè¯·æ±‚çš„å±å®³å¤šå¤š"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸè¯·æ±‚çš„å±å®³å¤šå¤š"}},[t._v("#")]),t._v(" è·¨åŸŸè¯·æ±‚çš„å±å®³å¤šå¤š")]),t._v(" "),a("p",[t._v("ä¸Šæ–‡æˆ‘ä»¬äº†è§£äº†ä»€ä¹ˆæ˜¯åŒæºï¼Œä»€ä¹ˆæ˜¯è·¨åŸŸï¼Œç°åœ¨æ¥çœ‹çœ‹ä¸»è¦å­˜åœ¨çš„é—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("åœ¨å¼•å…¥äº† "),a("code",[t._v("<img>")]),t._v(" ä¹‹åï¼Œæ–°çš„æ ‡ç­¾æ›´æ˜¯æ‰å †æ¶Œç°å‡ºæ¥ã€‚æ¯”å¦‚ "),a("code",[t._v("<script>")]),t._v("ã€"),a("code",[t._v("<frame>")]),t._v("ã€"),a("code",[t._v("<video>")]),t._v("ã€"),a("code",[t._v("<audio>")]),t._v("ã€"),a("code",[t._v("<iframe>")]),t._v("ã€"),a("code",[t._v("<link>")]),t._v("ã€"),a("code",[t._v("<form>")]),t._v(" ç­‰ç­‰ã€‚åœ¨ç½‘é¡µçš„åŠ è½½è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€šè¿‡ä¸Šè¿°çš„æ ‡ç­¾è·å–åˆ°é¡µé¢éœ€è¦çš„èµ„æºï¼Œè€Œè¿™äº›è·å–èµ„æºçš„è¯·æ±‚æ—¢æœ‰å¯èƒ½æ˜¯åŒæºçš„ä¹Ÿæœ‰å¯èƒ½æ˜¯è·¨åŸŸçš„ã€‚")]),t._v(" "),a("p",[t._v("æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä¸å­˜åœ¨ CORSï¼Œå¹¶ä¸”æµè§ˆå™¨å…è®¸å„ç§è·¨åŸŸè¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("å‡å¦‚åœ¨æˆ‘ "),a("code",[t._v("evil.com")]),t._v(" åŸŸåä¸‹çš„é¡µé¢ä¸Šæœ‰ä¸€ä¸ª "),a("code",[t._v("<script>")]),t._v(" æ ‡ç­¾ã€‚çœ‹èµ·æ¥è¿™åªæ˜¯ä¸ªæ™®æ™®é€šé€šçš„é¡µé¢ï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸Šé¢è·å–ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ã€‚å®é™…ä¸Šï¼Œåœ¨ "),a("code",[t._v("<script>")]),t._v(" æ ‡ç­¾ä¸­ï¼Œæˆ‘å†™äº†ä¸€æ®µå‘é“¶è¡Œçš„ "),a("code",[t._v("DELETE /account")]),t._v(" æ¥å£å‘èµ·è¯·æ±‚çš„ä»£ç ã€‚ç”±äºä¸Šæ–‡æˆ‘ä»¬å‡è®¾æµè§ˆå™¨å…è®¸å„ç§è·¨åŸŸè¯·æ±‚ï¼Œæ‰€ä»¥æ¯å½“ä½ è®¿é—®è¿™ä¸ªé¡µé¢æ—¶ï¼Œéƒ½ä¼šæœ‰ä¸ª AJAX è¯·æ±‚æ‚„æ‚„åœ°è°ƒç”¨é“¶è¡Œçš„ APIã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://picbed.kimyang.cn/202109050834331.png",alt:"å™—ï¼Œä½ çš„è´¦å·å®ŒçŠŠå­äº†ğŸŒ¬"}})]),t._v(" "),a("p",[t._v("å˜¿å˜¿ â€”â€” æƒ³è±¡ä¸€ä¸‹ä½ æ­£æ‚ é—²åœ°æµè§ˆç½‘é¡µï¼Œçªç„¶å°±æ”¶åˆ°äº†ä¸€å°æ¥è‡ªé“¶è¡Œçš„é‚®ä»¶ï¼Œå†…å®¹æ˜¯æ­å–œä½ æˆåŠŸåˆ é™¤äº†ä½ çš„è´¦æˆ·ã€‚æˆ‘çŸ¥é“ä½ åœ¨æƒ³å•¥ï¼Œå¦‚æœè¿™ä¹ˆç®€å•å°±èƒ½æŠŠè´¦æˆ·åˆ æ‰çš„è¯ï¼Œé‚£å°±èƒ½å¯¹é“¶è¡Œåš"),a("strong",[t._v("ä»»ä½•äº‹")]),t._v("äº†ï¼Œå’³å’³ï¼Œç¦»é¢˜äº†ã€‚")]),t._v(" "),a("p",[t._v("ä¸ºäº†è®©æˆ‘çš„é‚ªæ¶ "),a("code",[t._v("<script>")]),t._v(" èƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ‘è¿˜éœ€è¦åœ¨è¯·æ±‚ä¸­åŠ å…¥æ¥è‡ªç›®æ ‡é“¶è¡Œç½‘ç«™çš„è®¤è¯ä¿¡æ¯ï¼ˆcookiesï¼‰ã€‚è¿™æ ·é“¶è¡Œçš„æœåŠ¡å™¨å°±çŸ¥é“ä½ æ˜¯è°å’Œè¦åˆ è°çš„è´¦æˆ·å•¦ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çœ‹çœ‹å¦å¤–ä¸€ä¸ªæ²¡é‚£ä¹ˆé‚ªæ¶çš„ä¾‹å­ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘æƒ³çŸ¥é“"),a("strong",[t._v("æ£’æ£’å…¬å¸")]),t._v("çš„å‘˜å·¥ä¿¡æ¯ï¼Œä»–ä»¬å…¬å¸çš„å†…ç½‘æ˜¯ "),a("code",[t._v("intra.awesome-corp.com")]),t._v("ã€‚åœ¨æˆ‘çš„ç½‘ç«™ "),a("code",[t._v("dangerous.com")]),t._v(" ä¸Šï¼Œæˆ‘æ”¾ç½®äº†ä¸€ä¸ªæ ‡ç­¾ "),a("code",[t._v('<img src="https://intra.awesome-corp.com/avatars/john-doe.png">')]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºé‚£äº›æ²¡æœ‰ç›®æ ‡å…¬å¸å†…ç½‘ "),a("code",[t._v("intra.awesome-corp.com")]),t._v(" è®¿é—®æƒé™çš„äººæ¥è¯´ï¼Œä¸Šæ–‡çš„æ ‡ç­¾æ˜¯åŠ è½½ä¸å‡ºæ¥å›¾ç‰‡çš„ â€”â€” ä¼šäº§ç”Ÿä¸€ä¸ªé”™è¯¯ä¿¡æ¯ã€‚ç›¸åï¼Œå¦‚æœä½ å¯ä»¥è¿ä¸Šæ£’æ£’å…¬å¸å†…ç½‘çš„è¯ï¼Œæ­¤æ—¶ä½ æ‰“å¼€ "),a("code",[t._v("dangerous.com")]),t._v(" ç½‘ç«™ï¼Œé‚£ä¹ˆæˆ‘å°±çŸ¥é“ä½ æœ‰æ£’æ£’å…¬å¸å†…ç½‘çš„è®¿é—®æƒé™äº†ã€‚")]),t._v(" "),a("p",[t._v("è¿™æ„å‘³ç€æˆ‘å°†èƒ½å¤Ÿè·å¾—æœ‰å…³ä½ çš„ä¸€äº›ä¿¡æ¯ã€‚ è™½ç„¶è¿™äº›ä¿¡æ¯ä¸è¶³ä»¥è®©æˆ‘å‘èµ·ä¸€æ¬¡æœ‰ä»·å€¼çš„æ”»å‡»ï¼Œä¸è¿‡ä½ èƒ½è®¿é—®æ£’æ£’å…¬å¸çš„å†…ç½‘ï¼Œè¿™æ¡æ¶ˆæ¯å¯¹äºæ”»å‡»å‘èµ·è€…æ¥è¯´å°±æ¯”è¾ƒæœ‰ä»·å€¼äº†ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://picbed.kimyang.cn/202109050835399.png",alt:"å‘ç¬¬ä¸‰æ–¹æ³„éœ²ä¿¡æ¯ ğŸ’¦"}})]),t._v(" "),a("p",[t._v("ä»¥ä¸Šä¸¤ä¸ªä¾‹å­éå¸¸ç®€å•ï¼Œä¸è¿‡ä¹Ÿæ°æ°è¯´æ˜äº†åŒæºç­–ç•¥å’Œ CORS çš„å¿…è¦æ€§ã€‚å½“ç„¶è·¨åŸŸè¯·æ±‚çš„å±å®³ä¹Ÿä¸æ­¢è¿™äº›ã€‚æœ‰çš„å±å®³æˆ‘ä»¬å¯ä»¥é¿å…ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å±å®³è®©æˆ‘ä»¬æŸæ‰‹æ— ç­– â€”â€” å®ƒä»¬å¤©ç„¶æ ¹æ¤äºç½‘ç»œå½“ä¸­ã€‚ä¸è¿‡ç›®å‰é€šè¿‡åª’ä»‹å‘èµ·çš„æ”»å‡»å·²ç»å¤§å¤§å‡å°‘ â€”â€” è¿™å¤šäºäº† CORSã€‚")]),t._v(" "),a("p",[t._v("ä¸è¿‡åœ¨èŠèµ· CORS ä¹‹å‰ï¼Œè¿˜æ˜¯å…ˆè¯´è¯´åŒæºç­–ç•¥å§ã€‚")]),t._v(" "),a("h2",{attrs:{id:"åŒæºç­–ç•¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŒæºç­–ç•¥"}},[t._v("#")]),t._v(" åŒæºç­–ç•¥")]),t._v(" "),a("p",[t._v("åŒæºç­–ç•¥é€šè¿‡é˜»æ–­ä»ä¸åŒæºåŠ è½½çš„èµ„æºçš„è¯»å–æƒé™æ¥é˜²æ­¢è·¨åŸŸæ”»å‡»ã€‚ä¸è¿‡è¿™ä¸ªç­–ç•¥è¿˜æ˜¯å…è®¸ä¸€äº›æ ‡ç­¾åŠ è½½ä¸åŒæºçš„èµ„æºï¼Œæ¯”å¦‚è¯´ "),a("code",[t._v("<img>")]),t._v(" æ ‡ç­¾ã€‚")]),t._v(" "),a("p",[t._v("åŒæºç­–ç•¥åœ¨ 1995 æ—¶è¢«å¼•å…¥ Netscape Navigator 2.02ï¼Œæœ€åˆæ—¨åœ¨ä¿æŠ¤å¯¹ DOM çš„è·¨åŸŸè®¿é—®ã€‚")]),t._v(" "),a("p",[t._v("å°½ç®¡æ²¡æœ‰ç¡¬æ€§è¦æ±‚åŒæºç­–ç•¥çš„å®ç°è¦éµå¾ªæŸä¸ªç¡®åˆ‡çš„è§„èŒƒï¼Œä½†æ‰€æœ‰çš„ç°ä»£æµè§ˆå™¨éƒ½ç”¨è‡ªå·±çš„æ–¹å¼å®ç°äº†è¿™ä¸ªç­–ç•¥ã€‚å…³äºåŒæºç­–ç•¥çš„ç»†åˆ™é˜è¿°ï¼Œå¯ä»¥åœ¨äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ï¼ˆIETFï¼‰çš„ "),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc6454",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC6454"),a("OutboundLink")],1),t._v(" æ‰¾åˆ°ã€‚")]),t._v(" "),a("p",[t._v("æ­¤è§„åˆ™é›†å®šä¹‰äº†åŒæºç­–ç•¥çš„å®ç°ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Tags")]),t._v(" "),a("th",[t._v("Cross-origin")]),t._v(" "),a("th",[t._v("Note")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("<iframe>")])]),t._v(" "),a("td",[t._v("å…è®¸åµŒå…¥")]),t._v(" "),a("td",[t._v("å–å†³äº "),a("code",[t._v("X-Frame-Options")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("<link>")])]),t._v(" "),a("td",[t._v("å…è®¸åµŒå…¥")]),t._v(" "),a("td",[t._v("å¯èƒ½éœ€è¦æ­£ç¡®çš„ "),a("code",[t._v("Content-Type")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("<form>")])]),t._v(" "),a("td",[t._v("å…è®¸å†™å…¥")]),t._v(" "),a("td",[t._v("ç»å¸¸ç”¨æ­¤æ ‡ç­¾è¿›è¡Œè·¨åŸŸå†™å…¥æ“ä½œ")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("<img>")])]),t._v(" "),a("td",[t._v("å…è®¸åµŒå…¥")]),t._v(" "),a("td",[t._v("ç¦æ­¢é€šè¿‡ JavaScript è·¨åŸŸè¯»å–å¹¶å°†å…¶åŠ è½½åˆ° "),a("code",[t._v("<canvas>")]),t._v(" æ ‡ç­¾ä¸­")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("<audio>")]),t._v(" / "),a("code",[t._v("<video>")])]),t._v(" "),a("td",[t._v("å…è®¸åµŒå…¥")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[a("code",[t._v("<script>")])]),t._v(" "),a("td",[t._v("å…è®¸åµŒå…¥")]),t._v(" "),a("td",[t._v("å¯èƒ½ä¼šè¢«ç¦æ­¢è®¿é—®ç‰¹å®šçš„ API")])])])]),t._v(" "),a("p",[t._v("åŒæºç­–ç•¥è§£å†³äº†å¾ˆå¤šé—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†è¯¸å¤šçš„é™åˆ¶ã€‚ç‰¹åˆ«æ˜¯åœ¨å•é¡µåº”ç”¨å’Œå¯Œåª’ä½“ç½‘ç«™ä¸­ï¼Œå®ƒçš„ä¼—å¤šè§„åˆ™åè€Œé™åˆ¶äº†ç½‘ç«™çš„å‘å±•ã€‚")]),t._v(" "),a("p",[t._v("åœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼ŒCORS è¯ç”Ÿäº†ï¼Œå…¶ç›®æ ‡å°±æ˜¯åœ¨åŒæºç­–ç•¥çš„æ¡†æ¶å†…ä¸ºè·¨åŸŸè®¿é—®æä¾›æ›´åŠ çµæ´»çš„æ–¹å¼ã€‚")]),t._v(" "),a("h2",{attrs:{id:"èµ°è¿›-cors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#èµ°è¿›-cors"}},[t._v("#")]),t._v(" èµ°è¿› CORS")]),t._v(" "),a("p",[t._v("ç›®å‰æˆ‘ä»¬å·²ç»ææ¸…æ¥šäº†ä»€ä¹ˆæ˜¯æºã€å®ƒæ˜¯æ€ä¹ˆå®šä¹‰çš„ã€è·¨åŸŸè¯·æ±‚çš„ç¼ºç‚¹ä»¥åŠæµè§ˆå™¨å®ç°çš„åŒæºç­–ç•¥ã€‚")]),t._v(" "),a("p",[t._v("ç°åœ¨æ˜¯æ—¶å€™è®©æˆ‘ä»¬ç†Ÿæ‚‰è·¨æºèµ„æºå…±äº«ï¼ˆCORSï¼‰äº†ã€‚CORS æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå…è®¸é€šè¿‡ç½‘ç»œæ§åˆ¶å¯¹ç½‘é¡µä¸Šå­èµ„æºçš„è®¿é—®ã€‚è¯¥æœºåˆ¶å°†å­èµ„æºçš„è®¿é—®åˆ†ä¸ºä¸‰ç§ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("è·¨åŸŸå†™æ“ä½œ")]),t._v(" "),a("li",[t._v("è·¨åŸŸèµ„æºåµŒå…¥")]),t._v(" "),a("li",[t._v("è·¨åŸŸè¯»æ“ä½œ")])]),t._v(" "),a("p",[t._v("åœ¨æˆ‘ä»¬è¯¦ç»†ä»‹ç»è¿™ä¸‰è€…ä¹‹å‰ï¼Œéœ€è¦æ˜ç™½ï¼Œå°½ç®¡æµè§ˆå™¨ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰å¯èƒ½å…è®¸æŸç§ç±»å‹çš„è·¨åŸŸè¯·æ±‚ï¼Œä½†æ˜¯è¿™"),a("strong",[t._v("å¹¶ä¸æ„å‘³ç€è¯¥è¯·æ±‚ä¼šè¢«æœåŠ¡å™¨æ¥æ”¶")]),t._v("ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è·¨åŸŸå†™å…¥")]),t._v("åŒ…æ‹¬é“¾æ¥ã€é‡å®šå‘å’Œè¡¨å•æäº¤ã€‚åœ¨æµè§ˆå™¨å¯ç”¨ CORS çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„è¿™äº›æ“ä½œéƒ½"),a("strong",[t._v("è¢«å…è®¸")]),t._v("ã€‚æœ‰äº›æƒ…å†µä¸‹ä¼šäº§ç”Ÿä¸€ä¸ªå«åš"),a("strong",[t._v("é¢„æ£€è¯·æ±‚")]),t._v("çš„ä¸œè¥¿ï¼Œè¿™æ—¶å¯èƒ½ä¼šå½±å“åˆ°è·¨åŸŸå†™æ“ä½œï¼Œæˆ‘ä»¬åœ¨ä¸‹æ–‡ä¼šè¯¦ç»†åœ°è¯´æ˜è¿™ç§æƒ…å†µã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è·¨åŸŸåµŒå…¥")]),t._v("æ˜¯æŒ‡é€šè¿‡ "),a("code",[t._v("<script>")]),t._v("ã€"),a("code",[t._v("<link>")]),t._v("ã€"),a("code",[t._v("<img>")]),t._v("ã€"),a("code",[t._v("<video>")]),t._v("ã€"),a("code",[t._v("<audio>")]),t._v("ã€"),a("code",[t._v("<object>")]),t._v("ã€"),a("code",[t._v("<embed>")]),t._v("ã€"),a("code",[t._v("<iframe>")]),t._v(" ç­‰æ ‡ç­¾åŠ è½½çš„å­èµ„æºã€‚é»˜è®¤æƒ…å†µä¸‹å®ƒä»¬å‡è¢«"),a("strong",[t._v("å…è®¸")]),t._v("è·¨åŸŸåµŒå…¥ã€‚ä¸è¿‡ "),a("code",[t._v("<iframe>")]),t._v(" æœ‰ç‚¹ç‰¹åˆ« â€”â€” å› ä¸ºå®ƒçš„ç›®çš„æ˜¯åœ¨æ¡†æ¶å†…åŠ è½½ä¸åŒçš„é¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨ "),a("code",[t._v("X-Frame-options")]),t._v(" å“åº”å¤´æ§åˆ¶å…¶æ˜¯å¦å¯ä»¥è·¨åŸŸåŠ è½½ã€‚")]),t._v(" "),a("p",[t._v("åƒ "),a("code",[t._v("<img>")]),t._v(" è¿™ç§å¯ä»¥åµŒå…¥ç½‘ç«™çš„å­èµ„æº â€”â€” å®ƒä»¬è¯ç”Ÿçš„åŸå› ä¹‹ä¸€å°±æ˜¯ä¸ºäº†è·å–ä¸åŒæºçš„èµ„æºã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ CORS ä¸­åŒºåˆ†è·¨åŸŸåµŒå…¥å’Œè·¨åŸŸè¯»å–ï¼Œå¹¶ä¸”ç›¸åº”çš„å¤„ç†æ–¹å¼ä¹Ÿä¸åŒã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è·¨åŸŸè¯»å–")]),t._v(" æ˜¯ç”± AJAX / "),a("code",[t._v("fetch")]),t._v(" è·å–å­èµ„æºæ‰€äº§ç”Ÿçš„ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼š"),a("strong",[t._v("é™åˆ¶")]),t._v("æ­¤ç±»è¯·æ±‚ã€‚å½“ç„¶ï¼Œæœ‰ä¸€ç§é€šè¿‡åµŒå…¥å­èµ„æºçš„æ–¹æ³•ä¹Ÿèƒ½å®ç°è·¨åŸŸè¯»å–ï¼Œä¸è¿‡ç›¸åº”åœ°ï¼Œå¦‚ä»Šçš„æµè§ˆå™¨ä¹Ÿå­˜åœ¨ç€å¦ä¸€ä¸ªç­–ç•¥æ¥åº”å¯¹è¿™ç§æ–¹æ³•ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœä½ çš„æµè§ˆå™¨å·²æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå®ƒåº”è¯¥å·²ç»å®ç°ä»¥ä¸Šçš„ç­–ç•¥äº†ã€‚")]),t._v(" "),a("h3",{attrs:{id:"è·¨åŸŸå†™æ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸå†™æ“ä½œ"}},[t._v("#")]),t._v(" è·¨åŸŸå†™æ“ä½œ")]),t._v(" "),a("p",[t._v("æ‰§è¡Œè·¨åŸŸå†™å…¥æ“ä½œæœ‰æ—¶ä¸ä¼šæˆåŠŸï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œçœ‹çœ‹ CORS çš„å…·ä½“ä½œç”¨ã€‚")]),t._v(" "),a("p",[t._v("é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹ä¸‹ä½¿ç”¨ "),a("a",{attrs:{href:"https://crystal-lang.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Crystal"),a("OutboundLink")],1),t._v(" (æ¡†æ¶ä½¿ç”¨ "),a("a",{attrs:{href:"https://kemalcr.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kemal"),a("OutboundLink")],1),t._v(") è¯­è¨€å®ç°çš„ä¸€ä¸ª HTTP æœåŠ¡ï¼š")]),t._v(" "),a("div",{staticClass:"language-crystal extra-class"},[a("pre",{pre:!0,attrs:{class:"language-crystal"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kemal"')])]),t._v("\n\nport "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENV")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PORT"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to_i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4000")]),t._v("\n\nget "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello world!"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\nget "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/greet"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hey!"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\npost "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/greet"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("#{")]),a("span",{pre:!0,attrs:{class:"token content"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('!"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\nKemal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" port\nKemal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run\n")])])]),a("p",[t._v("åœ¨ "),a("code",[t._v("/greet")]),t._v(" è·¯å¾„ä¸­æ¥æ”¶ä¸€ä¸ªè¯·æ±‚ï¼Œé¦–å…ˆè·å–äº†è¯·æ±‚ä½“ä¸­çš„ "),a("code",[t._v("name")]),t._v(" å±æ€§å€¼ï¼Œä¹‹åè¿”å›äº† "),a("code",[t._v("Hello #{name}!")]),t._v("ã€‚æˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤æ¥å¯åŠ¨è¿™ä¸ªå°æœåŠ¡ï¼š")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ crystal run server.cr\n")])])]),a("p",[t._v("æœåŠ¡å¯åŠ¨å¹¶å¼€å§‹ç›‘å¬ "),a("code",[t._v("localhost:4000")]),t._v("ã€‚é€šè¿‡æµè§ˆå™¨è®¿é—® "),a("code",[t._v("localhost:4000")]),t._v("ï¼Œå°†ä¼šçœ‹åˆ° â€œHello Worldâ€ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://picbed.kimyang.cn/202109050835757.png",alt:"Hello, world! ğŸŒ"}})]),t._v(" "),a("p",[t._v("å¥½å•¦ï¼Œæˆ‘ä»¬çš„æœåŠ¡å·²ç»æˆåŠŸè¿è¡Œäº†ï¼Œç°åœ¨ä»æµè§ˆå™¨çš„æ§åˆ¶å°å‘ "),a("code",[t._v("localhost:4000")]),t._v(" å‘èµ·ä¸€ä¸ª "),a("code",[t._v("POST /greet")]),t._v(" è¯·æ±‚å§ã€‚æˆ‘ä»¬ä½¿ç”¨ "),a("code",[t._v("fetch")]),t._v(" æ–¹æ³•å‘èµ·è¯·æ±‚ï¼š")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:4000/greet"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"POST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("headers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Content-Type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ilija"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" resp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("æ‰§è¡Œæ­¤æ®µä»£ç åï¼Œæˆ‘ä»¬æ”¶åˆ°äº†æ¥è‡ªæœåŠ¡çš„é—®å€™ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://picbed.kimyang.cn/202109050835204.png",alt:"Hi there! ğŸ‘‹"}})]),t._v(" "),a("p",[t._v("è¿™æ˜¯ä¸€ä¸ªæ²¡æœ‰è·¨åŸŸçš„ "),a("code",[t._v("POST")]),t._v(" è¯·æ±‚ï¼Œæ˜¯ä» "),a("code",[t._v("http://localhost:4000")]),t._v("ï¼ˆå’Œè¯·æ±‚ç›®æ ‡åœ°å€åŒæºï¼‰é¡µé¢å‘èµ·çš„åŒæºè¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å°è¯•å‘æ­¤åœ°å€å‘é€ä¸€ä¸ªè·¨åŸŸè¯·æ±‚ã€‚æˆ‘ä»¬æ‰“å¼€ "),a("code",[t._v("https://google.com")]),t._v("ï¼Œç„¶åä»æ­¤æ ‡ç­¾é¡µå‘èµ·ä¸€ä¸ªå’Œä¸Šæ–‡ç›¸åŒçš„è¯·æ±‚ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post.png",alt:"Hello, CORS! ğŸ’£"}})]),t._v(" "),a("p",[t._v("é€šè¿‡æ­¤æ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†è‘—åçš„ CORS é”™è¯¯ã€‚å°½ç®¡ Crystal æœåŠ¡å¯ä»¥å“åº”è¿™ä¸ªè¯·æ±‚ï¼Œæˆ‘ä»¬çš„æµè§ˆå™¨è¿˜æ˜¯æ‹¦æˆªäº†è¯·æ±‚ã€‚ä»æŠ¥é”™ä¿¡æ¯æˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼Œè¯·æ±‚åœ¨å°è¯•è¿›è¡Œè·¨åŸŸå†™å…¥æ“ä½œã€‚")]),t._v(" "),a("p",[t._v("ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä» "),a("code",[t._v("http://localhost:4000")]),t._v(" é¡µé¢å‘ "),a("code",[t._v("http://localhost:4000/greet")]),t._v(" å‘èµ·è¯·æ±‚ï¼Œå› ä¸ºé¡µé¢åœ°å€å’Œç›®æ ‡åœ°å€åŒæºï¼Œæ‰€ä»¥æµè§ˆå™¨æ²¡æœ‰æ‹¦æˆªæ­¤è¯·æ±‚ã€‚ç›¸ååœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œä»ç½‘ç«™ï¼ˆ"),a("code",[t._v("https://google.com")]),t._v("ï¼‰å‘èµ·çš„è¯·æ±‚è¯•å›¾å‘ "),a("code",[t._v("http://localhost:4000")]),t._v(" æ‰§è¡Œå†™å…¥æ“ä½œï¼Œç„¶åæµè§ˆå™¨å¯¹è¯·æ±‚åšäº†æ ‡è®°ï¼Œå¹¶ä¸”æ‹¦æˆªäº†å®ƒã€‚")]),t._v(" "),a("h3",{attrs:{id:"é¢„æ£€è¯·æ±‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é¢„æ£€è¯·æ±‚"}},[t._v("#")]),t._v(" é¢„æ£€è¯·æ±‚")]),t._v(" "),a("p",[t._v("æŸ¥çœ‹å¼€å‘è€…æ§åˆ¶å°ä¸­ Network æ ‡ç­¾é¡µé‡Œçš„å†…å®¹ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸Šè¿°ä»£ç å‘èµ·äº†ä¸¤æ¬¡è¯·æ±‚ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post-network.png",alt:"åœ¨ â€œNetworkâ€ é¢æ¿ä¸­çœ‹åˆ°ä¸¤ä¸ªå‡ºç«™è¯·æ±‚"}})]),t._v(" "),a("p",[t._v("æœ‰è¶£çš„æ˜¯ç¬¬ä¸€ä¸ªè¯·æ±‚çš„æ–¹æ³•æ˜¯ "),a("code",[t._v("OPTIONS")]),t._v("ï¼Œè€Œç¬¬äºŒä¸ªè¯·æ±‚çš„æ–¹æ³•æ˜¯ "),a("code",[t._v("POST")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("ä»”ç»†è§‚å¯Ÿä¸‹ "),a("code",[t._v("OPTIONS")]),t._v(" è¯·æ±‚ï¼Œä¼šå‘ç°æµè§ˆå™¨å…ˆå‘é€äº†"),a("code",[t._v("OPTIONS")]),t._v(" è¯·æ±‚ï¼Œå†å‘é€äº† "),a("code",[t._v("POST")]),t._v(" è¯·æ±‚ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post-network-options.png",alt:"ç»†ç©¶ä¸‹ OPTIONS è¯·æ±‚ ğŸ”"}})]),t._v(" "),a("p",[t._v("æœ‰æ„æ€çš„æ˜¯ï¼Œå³ä½¿ "),a("code",[t._v("OPTIONS")]),t._v(" è¯·æ±‚çš„å“åº”å·²ç»æ˜¯ HTTP 200ï¼Œåœ¨è¯·æ±‚åˆ—è¡¨ä¸­å®ƒè¿˜æ˜¯è¢«æ ‡è®°ä¸ºçº¢è‰²äº†ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ")]),t._v(" "),a("p",[t._v("è¿™æ˜¯ç°ä»£æµè§ˆå™¨å‘èµ·çš„"),a("strong",[t._v("é¢„æ£€è¯·æ±‚")]),t._v("ã€‚å¦‚æœ CORS è®¤ä¸ºä¸€ä¸ªè¯·æ±‚æ˜¯å¤æ‚è¯·æ±‚ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šå…ˆå‘èµ·é¢„æ£€è¯·æ±‚ã€‚åˆ¤å®šä¸€ä¸ªè¯·æ±‚ä¸º "),a("strong",[t._v("å¤æ‚")]),t._v(" è¯·æ±‚çš„æ ‡å‡†å¦‚ä¸‹ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("è¯·æ±‚ä½¿ç”¨çš„æ–¹æ³•ä¸æ˜¯ "),a("code",[t._v("GET")]),t._v("ã€"),a("code",[t._v("POST")]),t._v(" æˆ–è€… "),a("code",[t._v("HEAD")])]),t._v(" "),a("li",[t._v("è¯·æ±‚å¤´åŒ…å«äº† "),a("code",[t._v("Accept")]),t._v("ã€"),a("code",[t._v("Accept-Language")]),t._v(" å’Œ "),a("code",[t._v("Content-Language")]),t._v(" ä»¥å¤–çš„å­—æ®µ")]),t._v(" "),a("li",[t._v("è¯·æ±‚å¤´åŒ…å«äº† "),a("code",[t._v("Content-Type")]),t._v(" å­—æ®µï¼Œä¸”å®ƒçš„å€¼ä¸åœ¨ "),a("code",[t._v("application/x-www-form-urlencoded")]),t._v("ã€"),a("code",[t._v("multipart/form-data")]),t._v(" å’Œ "),a("code",[t._v("text/plain")]),t._v(" ä¸‰è€…ä¸­")])]),t._v(" "),a("p",[t._v("å› æ­¤åœ¨ä¸Šæ–‡çš„ä¾‹å­ä¸­ï¼Œå³ä½¿æˆ‘ä»¬å‘èµ·çš„æ˜¯ "),a("code",[t._v("POST")]),t._v(" è¯·æ±‚ï¼Œä½†æ˜¯ç”±äºè¯·æ±‚å¤´ä¸­çš„ "),a("code",[t._v("Content-Type: application/json")]),t._v("ï¼Œæµè§ˆå™¨æœ€åè¿˜æ˜¯åˆ¤å®šæˆ‘ä»¬çš„è¯·æ±‚ä¸ºå¤æ‚è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœæˆ‘ä»¬ä¿®æ”¹ä¸‹æˆ‘ä»¬çš„è¯·æ±‚å’ŒæœåŠ¡ï¼Œä½¿ä¹‹å¯ä»¥å‘é€å¹¶å¤„ç† "),a("code",[t._v("text/plain")]),t._v(" ç±»å‹çš„å†…å®¹ï¼ˆä»£æ›¿ JSONï¼‰ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¸ä¼šå‘èµ·é¢„æ£€è¯·æ±‚äº†ï¼š")]),t._v(" "),a("div",{staticClass:"language-crystal extra-class"},[a("pre",{pre:!0,attrs:{class:"language-crystal"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kemal"')])]),t._v("\n\nget "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello world!"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\nget "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/greet"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hey!"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\npost "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/greet"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body\n\n  name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"there"')])]),t._v("\n  name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nil"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("#{")]),a("span",{pre:!0,attrs:{class:"token content"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('!"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\nKemal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4000")]),t._v("\nKemal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run\n")])])]),a("p",[t._v("ç°åœ¨æˆ‘ä»¬å¯ä»¥å‘èµ·è¯·æ±‚å¤´å¸¦æœ‰ "),a("code",[t._v("Content-type: text/plain")]),t._v(" çš„è¯·æ±‚äº†:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:4000/greet"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"POST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("headers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Content-Type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/plain"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ilija"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" resp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("çœ‹å§ï¼Œè¿™æ¬¡å°±æ²¡æœ‰é¢„æ£€è¯·æ±‚äº†ï¼Œä¸è¿‡æµè§ˆå™¨çš„ CORS ç­–ç•¥ä»åœ¨æ‹¦æˆªå“åº”ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post-text-plain.png",alt:"CORS ä¾ç„¶åšæŒº"}})]),t._v(" "),a("p",[t._v("ä¸è¿‡ä¹Ÿæ­£å› ä¸ºæˆ‘ä»¬è¿™æ¬¡å‘èµ·çš„ä¸æ˜¯"),a("strong",[t._v("å¤æ‚")]),t._v("è¯·æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æµè§ˆå™¨ "),a("strong",[t._v("ä¹Ÿå¹¶æ²¡æœ‰æ‹¦æˆªè¯·æ±‚")]),t._v(":")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post-text-plain-response-blocked.png",alt:"è¯·æ±‚å‘èµ·æˆåŠŸ â¡ï¸"}})]),t._v(" "),a("p",[t._v("ç®€è€Œè¨€ä¹‹ï¼šé’ˆå¯¹ "),a("code",[t._v("text/plain")]),t._v(" è¿™ç§è·¨åŸŸè¯·æ±‚ï¼Œç”±äºæˆ‘ä»¬çš„æœåŠ¡"),a("strong",[t._v("ç¼ºå°‘å“åº”çš„é…ç½®")]),t._v("ï¼Œå¯¼è‡´æ— æ³•å¤„ç†æ­¤è¯·æ±‚ï¼Œä¹Ÿæ²¡æœ‰åšå¼‚å¸¸çš„ç»Ÿä¸€å¤„ç†ï¼Œè¿™éƒ¨åˆ†å’Œæµè§ˆå™¨ä¹Ÿæ²¡ä»€ä¹ˆå…³ç³»ã€‚ä¸è¿‡æµè§ˆå™¨å°½åŠ›åšåˆ°äº†å¦‚ä¸‹çš„æªæ–½ â€”â€” å®ƒä¸ä¼šå°†å“åº”ç›´æ¥æš´éœ²åœ¨é¡µé¢å’Œè¯·æ±‚åˆ—è¡¨ä¸­ã€‚å› æ­¤ï¼Œåœ¨æ­¤ä¾‹ä¸­ï¼ŒCORS æ²¡æœ‰æ‹¦æˆªè¯·æ±‚ â€”â€” "),a("strong",[t._v("å®ƒæ‹¦æˆªäº†å“åº”")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("æµè§ˆå™¨ä¸­çš„ CORS ç­–ç•¥è®¤ä¸ºæ­¤è¯·æ±‚æ˜¯ä¸€ä¸ªè·¨åŸŸè¯»å–è¯·æ±‚ï¼Œå³ä½¿è¯·æ±‚çš„æ–¹æ³•ä¸º "),a("code",[t._v("POST")]),t._v("ï¼Œè¯·æ±‚å¤´ä¸­ "),a("code",[t._v("Content-type")]),t._v(" çš„å±æ€§å€¼å´è¯´æ˜äº†å®ƒæœ¬è´¨ä¸Šå’Œ "),a("code",[t._v("GET")]),t._v(" è¯·æ±‚æ— å¼‚ã€‚è·¨åŸŸè¯»å–è¯·æ±‚é»˜è®¤ä¼šè¢«æ‹¦æˆªï¼Œå› æ­¤åœ¨è¯·æ±‚åˆ—è¡¨ä¸­æˆ‘ä»¬çœ‹åˆ°äº†è¢«æ‹¦æˆªçš„å“åº”ã€‚")]),t._v(" "),a("p",[t._v("æ¶ˆé™¤é¢„æ£€è¯·æ±‚ä»¥åº”å¯¹ CORS ç­–ç•¥å¯å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½åŠæ³•ï¼Œå®é™…ä¸Šï¼Œå¦‚æœä½ å¸Œæœ›æœåŠ¡å™¨å¯ä»¥å¦¥å–„å¤„ç†é¢„æ£€è¯·æ±‚ï¼Œé‚£å°±åº”è¯¥é’ˆå¯¹ "),a("code",[t._v("OPTIONS")]),t._v(" æ–¹å¼çš„è¯·æ±‚è¿”å›å¸¦æœ‰æ­£ç¡®å“åº”å¤´çš„å“åº”ã€‚")]),t._v(" "),a("p",[t._v("åœ¨å¤„ç† "),a("code",[t._v("OPTIONS")]),t._v(" è¯·æ±‚æ—¶ï¼Œä½ éœ€è¦çŸ¥é“æµè§ˆå™¨ä¼šç‰¹åˆ«å…³æ³¨ä¸‰ä¸ªå‡ºç°åœ¨é¢„æ£€è¯·æ±‚å“åº”å¤´çš„å±æ€§ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Access-Control-Allow-Methods")]),t._v(" â€”â€” è¿™ä¸ªå±æ€§æ ‡è¯†äº†åœ¨ CORS ç­–ç•¥ä¸‹ï¼Œå“åº”çš„ URL æ”¯æŒå“ªäº›è¯·æ±‚æ–¹æ³•ã€‚")]),t._v(" "),a("li",[a("code",[t._v("Access-Control-Allow-Headers")]),t._v(" â€”â€” è¿™ä¸ªå±æ€§æ ‡è¯†äº†åœ¨ CORS ç­–ç•¥ä¸‹ï¼Œå“åº”çš„ URL æ”¯æŒå“ªäº›è¯·æ±‚å¤´ã€‚")]),t._v(" "),a("li",[a("code",[t._v("Access-Control-Max-Age")]),t._v(" â€”â€” å®ƒè¡¨ç¤ºå¯ä»¥ç¼“å­˜ "),a("code",[t._v("Access-Control-Allow-Methods")]),t._v(" å’Œ "),a("code",[t._v("Access-Control-Allow-Headers")]),t._v(" å¤´éƒ¨ä¸­æä¾›çš„ä¿¡æ¯çš„ç§’æ•°ï¼ˆé»˜è®¤ä¸º 5ï¼‰ã€‚")])]),t._v(" "),a("p",[t._v("ç°åœ¨çœ‹ä¸€ä¸‹ä¸Šæ–‡ä¸¾ä¾‹çš„å¤æ‚è¯·æ±‚ï¼š")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:4000/greet"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"POST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("headers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Content-Type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ilija"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" resp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ä»ä¸Šæ–‡æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œå½“å‘èµ·è¿™ä¸ªè¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬çš„æµè§ˆå™¨ä¼šå…ˆæ ¹æ®é¢„æ£€è¯·æ±‚çš„å“åº”æ¥æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å¯ä»¥å¤„ç†è·¨åŸŸè¯·æ±‚ã€‚ä¸ºäº†èƒ½æ­£ç¡®åœ°å“åº”è¿™ä¸ªè·¨åŸŸè¯·æ±‚ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å°† "),a("code",[t._v("OPTIONS /greet")]),t._v(" ç«¯ç‚¹åŠ å…¥æˆ‘ä»¬çš„æœåŠ¡ä¸­ã€‚åœ¨è¿™æœåŠ¡çš„å“åº”å¤´ä¸­, æ–°åŠ å…¥çš„ç«¯ç‚¹ä¼šå‘ŠçŸ¥æµè§ˆå™¨ï¼šæ¥è‡ªæº "),a("code",[t._v("https://www.google.com")]),t._v(" å¹¶ä¸”å¸¦æœ‰ "),a("code",[t._v("Content-type: application/json")]),t._v(" å¤´éƒ¨çš„ "),a("code",[t._v("POST /greet")]),t._v(" è¯·æ±‚å¯ä»¥è¢«æ¥æ”¶ã€‚")]),t._v(" "),a("p",[t._v("ä¸ºäº†è¾¾åˆ°ç›®æ ‡ï¼Œæˆ‘ä»¬ä½¿ç”¨ "),a("code",[t._v("Access-Control-Allow-*")]),t._v(" è¿™ç§å“åº”å¤´éƒ¨ï¼š")]),t._v(" "),a("div",{staticClass:"language-crystal extra-class"},[a("pre",{pre:!0,attrs:{class:"language-crystal"}},[a("code",[t._v("options "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/greet"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Allow `POST /greet`...")]),t._v("\n  env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Methods"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"POST"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...with `Content-type` header in the request...")]),t._v("\n  env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Headers"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-type"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...from https://www.google.com origin.")]),t._v("\n  env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Origin"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.google.com"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),a("p",[t._v("é‡å¯æœåŠ¡ï¼Œå†æ¬¡å‘èµ·è¯·æ±‚ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post-blocked.png",alt:"è¿˜æ˜¯è¢«æ‹¦æˆªäº†ï¼Ÿ ğŸ¤”"}})]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çš„è¯·æ±‚ä»ç„¶è¢«æ‹¦æˆªäº†ã€‚å³ä½¿æˆ‘ä»¬çš„ "),a("code",[t._v("OPTIONS /greet")]),t._v(" ç«¯ç‚¹ç¡®å®å¯¹è¯·æ±‚åšäº†åˆé€‚çš„å¤„ç†ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯çœ‹åˆ°äº†æŠ¥é”™ä¿¡æ¯ã€‚ä¸è¿‡å¼€å‘è€…å·¥å…·ä¸­çš„ç½‘ç»œæ ‡ç­¾å‘æˆ‘ä»¬å±•ç¤ºäº†ä¸€äº›æœ‰è¶£çš„ä¿¡æ¯ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post-blocked-network-inspect.png",alt:"OPTIONS é‚£è¡Œè¯·æ±‚å˜æˆç»¿è‰²äº†ï¼ ğŸ‰"}})]),t._v(" "),a("p",[t._v("å‘ "),a("code",[t._v("OPTIONS /greet")]),t._v(" ç«¯ç‚¹å‘èµ·çš„è¯·æ±‚æˆåŠŸäº†ï¼ä½†æ˜¯ "),a("code",[t._v("POST /greet")]),t._v(" è°ƒç”¨ä»ç„¶å¤±è´¥ã€‚å¦‚æœæˆ‘ä»¬çœ‹ä¸€ä¸‹ "),a("code",[t._v("POST /greet")]),t._v(" è¯·æ±‚çš„å†…éƒ¨ç»“æ„ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ªç†Ÿæ‚‰çš„ä¿¡æ¯ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post-blocked-post-inspect.png",alt:"POST ä¹Ÿæ˜¯æˆåŠŸçš„ï¼Ÿ ğŸ˜²"}})]),t._v(" "),a("p",[t._v("å®é™…ä¸Šï¼Œè¯·æ±‚æˆåŠŸäº† â€”â€” æœåŠ¡è¿”å›äº† HTTP 200ã€‚é¢„æ£€è¯·æ±‚ç¡®å®èµ·æ•ˆäº† â€”â€” æµè§ˆå™¨é¡ºåˆ©å‘èµ·äº† "),a("code",[t._v("POST")]),t._v(" è¯·æ±‚ã€‚ä½†æ˜¯é’ˆå¯¹ "),a("code",[t._v("POST")]),t._v(" è¯·æ±‚çš„å“åº”ä¸­æ²¡æœ‰åŒ…å«æœ‰å…³ CORS çš„å¤´éƒ¨ä¿¡æ¯ï¼Œæ‰€ä»¥å³ä½¿æµè§ˆå™¨å‘èµ·äº†è¯·æ±‚ï¼Œä½†å“åº”ä¹Ÿè¢«å®ƒè‡ªå·±æ‹¦æˆªäº†ã€‚")]),t._v(" "),a("p",[t._v("ä¸ºäº†ä½¿æµè§ˆå™¨æ­£ç¡®å¤„ç†æ¥è‡ª "),a("code",[t._v("POST /greet")]),t._v(" è¯·æ±‚çš„å“åº”ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä¸º "),a("code",[t._v("POST")]),t._v(" ç«¯ç‚¹åŠ ä¸€ä¸ª CORS å¤´éƒ¨ï¼š")]),t._v(" "),a("div",{staticClass:"language-crystal extra-class"},[a("pre",{pre:!0,attrs:{class:"language-crystal"}},[a("code",[t._v("post "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/greet"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Origin"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.google.com"')])]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("#{")]),a("span",{pre:!0,attrs:{class:"token content"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('!"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),a("p",[t._v("æˆ‘ä»¬ç»™å“åº”å¤´åŠ äº† "),a("code",[t._v("Access-Control-Allow-Origin")]),t._v(" å±æ€§åï¼Œä¼šå‘ŠçŸ¥æµè§ˆå™¨æ‰“å¼€ "),a("code",[t._v("https://www.google.com")]),t._v(" çš„æ ‡ç­¾é¡µå¯ä»¥è®¿é—®å“åº”å†…å®¹ã€‚")]),t._v(" "),a("p",[t._v("å†å°è¯•ä¸€ä¸‹ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post-success.png",alt:"POST æˆåŠŸå•¦ï¼"}})]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çœ‹åˆ° "),a("code",[t._v("POST /greet")]),t._v(" è¿”å›äº†æ­£ç¡®çš„å“åº”å†…å®¹ï¼ŒåŒæ—¶æ²¡æœ‰ä»»ä½•æŠ¥é”™ã€‚å†ç„ä¸€çœ¼ Network æ ‡ç­¾ï¼Œä¼šå‘ç°ä¸¤ä¸ªè¯·æ±‚éƒ½æ˜¯ç»¿è‰²çš„äº†ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post-success-network.png",alt:"OPTIONS & POST æˆåŠŸï¼ ğŸ’ª"}})]),t._v(" "),a("p",[t._v("é€šè¿‡åœ¨é¢„æ£€ç«¯ç‚¹ "),a("code",[t._v("OPTIONS /greet")]),t._v(" ä½¿ç”¨æ­£ç¡®çš„å“åº”å¤´ï¼Œä½¿è·¨åŸŸè¯·æ±‚å¯ä»¥è®¿é—®æˆ‘ä»¬æœåŠ¡ä¸­çš„ "),a("code",[t._v("POST /greet")]),t._v(" ç«¯ç‚¹ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œåœ¨ä¸º "),a("code",[t._v("POST /greet")]),t._v(" ç«¯ç‚¹æ·»åŠ æ­£ç¡®çš„ CORS å“åº”å¤´ä¿¡æ¯åï¼Œæµè§ˆå™¨ç»ˆäºå¯ä»¥ä¸å†æ‹¦æˆªè·¨åŸŸå“åº”äº†ã€‚")]),t._v(" "),a("h3",{attrs:{id:"è·¨åŸŸè¯»å–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸè¯»å–"}},[t._v("#")]),t._v(" è·¨åŸŸè¯»å–")]),t._v(" "),a("p",[t._v("æ­£å¦‚æˆ‘ä»¬ä¸Šæ–‡æåˆ°çš„é‚£æ ·ï¼Œé»˜è®¤æƒ…å†µä¸‹è·¨åŸŸè¯»å–ä¼šè¢«æ‹¦æˆªã€‚è¿™æ˜¯æ•…æ„çš„ â€”â€” æˆ‘ä»¬ä¸ä¼šæƒ³åœ¨å½“å‰é¡µé¢ä¸ŠåŠ è½½å…¶ä»–æºä¸Šçš„èµ„æºã€‚")]),t._v(" "),a("p",[t._v("å‡å¦‚æˆ‘ä»¬åœ¨ Crystal æœåŠ¡ä¸­åŠ å…¥å¯¹ "),a("code",[t._v("GET /greet")]),t._v(" è¯·æ±‚çš„æ“ä½œï¼š")]),t._v(" "),a("div",{staticClass:"language-crystal extra-class"},[a("pre",{pre:!0,attrs:{class:"language-crystal"}},[a("code",[t._v("get "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/greet"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hey!"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),a("p",[t._v("æˆ‘ä»¬ä» "),a("code",[t._v("www.google.com")]),t._v(" é¡µé¢è¯•ç€è¯·æ±‚ "),a("code",[t._v("GET /greet")]),t._v(" ç«¯ç‚¹ï¼Œä¼šå‘ç°é­åˆ°äº† CORS æ‹¦æˆªï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-get.png",alt:"CORS æ‹¦æˆª ğŸ™…"}})]),t._v(" "),a("p",[t._v("ä»”ç»†æŸ¥çœ‹ä¸‹è¯·æ±‚å†…å®¹ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-get-blocked-inspect.png",alt:" GET è¯·æ±‚æˆåŠŸ ğŸ‰"}})]),t._v(" "),a("p",[t._v("å¦‚ä¹‹å‰ä¸€æ ·ï¼Œæµè§ˆå™¨ç¡®å®è®©è¯·æ±‚é¡ºåˆ©å‘èµ·äº† â€”â€” æ”¶åˆ°äº† HTTP 200 çš„å“åº”ã€‚ä¸è¿‡æµè§ˆå™¨æ²¡æœ‰å°†é‚£ä¸ªè¯·æ±‚çš„å“åº”æ˜¾ç¤ºåœ¨é¡µé¢/æ§åˆ¶å°ä¸­ã€‚åŒæ ·çš„ï¼Œè¿™ä¸ªä¾‹å­ä¸­ CORS æ²¡æœ‰æ‹¦æˆªè¯·æ±‚ â€”â€” "),a("strong",[t._v("å®ƒæ‹¦æˆªçš„æ˜¯å“åº”")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å°±åƒè·¨åŸŸå†™å…¥æ“ä½œä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® CORS å¹¶ä½¿å…¶å¯ç”¨äºè·¨åŸŸè¯»å– â€”â€” é€šè¿‡æ·»åŠ å¸¦æœ‰ "),a("code",[t._v("Access-Control-Allow-Origin")]),t._v(" çš„å¤´éƒ¨ä¿¡æ¯ï¼š")]),t._v(" "),a("div",{staticClass:"language-crystal extra-class"},[a("pre",{pre:!0,attrs:{class:"language-crystal"}},[a("code",[t._v("get "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/greet"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Origin"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.google.com"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hey!"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),a("p",[t._v("æµè§ˆå™¨è·å–åˆ°æ¥è‡ªæœåŠ¡å™¨çš„å“åº”æ—¶ï¼Œå®ƒä¼šå»æ£€æŸ¥å“åº”å¤´çš„ "),a("code",[t._v("Access-Control-Allow-Origin")]),t._v(" å±æ€§å€¼ï¼Œç”¨ä»¥å†³å®šæ˜¯å¦è®©é¡µé¢è¯»å–å“åº”å†…å®¹ã€‚ç°åœ¨æˆ‘ä»¬å°†å€¼è®¾ä¸º "),a("code",[t._v("https://www.google.com")]),t._v(" åï¼Œå°±å¯ä»¥æ­£ç¡®åœ°åŠ è½½å“åº”äº†ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-get-success.png",alt:"æˆåŠŸå‘èµ· GET è·¨åŸŸè¯·æ±‚ ğŸ‰"}})]),t._v(" "),a("p",[t._v("è¿™æ ·æµè§ˆå™¨æ—¢å¯ä»¥é˜²æ­¢è·¨åŸŸè¯»å–é€ æˆçš„å±å®³ï¼Œåˆç»™äºˆåç«¯æœåŠ¡ä¸€å®šçš„æ“ä½œç©ºé—´ï¼Œä½¿ä¹‹å¯ä»¥å“åº”ç‰¹å®šçš„è·¨åŸŸè¯·æ±‚ã€‚")]),t._v(" "),a("h2",{attrs:{id:"é…ç½®-cors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®-cors"}},[t._v("#")]),t._v(" é…ç½® CORS")]),t._v(" "),a("p",[t._v("å¦‚ä¸Šæ–‡ä¾‹å­ä¸­åšçš„é‚£æ ·ï¼Œä¸ºäº†è¿åˆæµè§ˆå™¨ä¸­çš„ CORS ç­–ç•¥ï¼Œæˆ‘ä»¬é’ˆå¯¹ "),a("code",[t._v("/greet")]),t._v(" è¯·æ±‚çš„å¤„ç†è®¾ç½®äº†å“åº”å¤´ä¸­ "),a("code",[t._v("Access-Control-Allow-Origin")]),t._v(" å±æ€§å€¼ä¸º "),a("code",[t._v("https://www.google.com")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-crystal extra-class"},[a("pre",{pre:!0,attrs:{class:"language-crystal"}},[a("code",[t._v("post "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/greet"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body\n\n  name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"there"')])]),t._v("\n  name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nil"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n\n  env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Access-Control-Allow-Origin"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.google.com"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("#{")]),a("span",{pre:!0,attrs:{class:"token content"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('!"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),a("p",[t._v("è¿™å°†å…è®¸ "),a("code",[t._v("https://www.google.com")]),t._v(" æºè°ƒç”¨æˆ‘ä»¬çš„æœåŠ¡ï¼Œå¹¶ä¸”æµè§ˆå™¨æ²¡æŠ¥ä»»ä½•é”™è¯¯ã€‚è®¾ç½®å¥½ "),a("code",[t._v("Access-Control-Allow-Origin")]),t._v(" çš„å€¼åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å†æ¬¡æ‰§è¡Œ "),a("code",[t._v("fetch")]),t._v(" æ“ä½œï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ieftimov.com/back-to-the-origin-with-cors/google-cross-origin-post-text-plain-success.png",alt:"æˆåŠŸï¼ ğŸ‰"}})]),t._v(" "),a("p",[t._v("æˆåŠŸäº†ï¼ç°åœ¨å¯ä»¥ä» "),a("code",[t._v("https://www.google.com")]),t._v(" å‘ "),a("code",[t._v("/greet")]),t._v(" å‘èµ·è·¨åŸŸè¯·æ±‚äº†ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å¤´éƒ¨ä¸­ç›¸åº”çš„å±æ€§å€¼ä¸º "),a("code",[t._v("*")]),t._v("ï¼Œè¿™æ ·æµè§ˆå™¨ä¼šå…è®¸ä»»ä½•æºå‘æˆ‘ä»¬çš„æœåŠ¡å‘èµ·æ­£ç¡®çš„è·¨åŸŸè¯·æ±‚ã€‚\né…ç½®æˆæ­¤å€¼éœ€è¦ä¸‰æ€è€Œåè¡Œï¼Œä¸è¿‡"),a("strong",[t._v("å¤§å¤šæ•°æƒ…å†µä¸‹")]),t._v("æ˜¯å®‰å…¨çš„ã€‚è¿™é‡Œæœ‰ä¸€æ¡æ€»ç»“å‡ºæ¥çš„å»ºè®®å¯ä¾›ä½ å‚è€ƒï¼šå¦‚æœè·¨åŸŸè¯·æ±‚ä»æµè§ˆå™¨æ— ç—•æ¨¡å¼ä¸‹çš„æ ‡ç­¾å‘å‡ºï¼Œå¹¶ä¸”å…¶è·å–åˆ°çš„æ•°æ®ä¹Ÿæ­£æ˜¯ä½ æƒ³å±•ç¤ºçš„ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªå®½æ¾çš„å€¼ï¼ˆ"),a("code",[t._v("*")]),t._v("ï¼‰æ¥åº”å¯¹ CORS ç­–ç•¥ã€‚")]),t._v(" "),a("p",[t._v("å¦ä¸€ç§é…ç½® CORS ä½¿ä¹‹æ”¾å®½å¯¹è¯·æ±‚é™åˆ¶çš„æ–¹æ³•æ˜¯ä½¿ç”¨å¸¦æœ‰ "),a("code",[t._v("Access-Control-Allow-Credentials")]),t._v(" å±æ€§çš„å“åº”å¤´ã€‚å½“è¯·æ±‚çš„ credetials æ¨¡å¼ä¸º "),a("code",[t._v("include")]),t._v(" æ—¶ï¼Œæµè§ˆå™¨ä¼šæ ¹æ®å“åº”å¤´ä¸­ "),a("code",[t._v("Access-Control-Allow-Credentials")]),t._v(" çš„å€¼æ¥å†³å®šæ˜¯å¦å°†å“åº”æš´éœ²ç»™å‰ç«¯ JavaScript ä»£ç ã€‚")]),t._v(" "),a("p",[t._v("è¯·æ±‚ä¸­çš„ credetials æ¨¡å¼å‡ºè‡ª "),a("a",{attrs:{href:"https://fetch.spec.whatwg.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fetch API"),a("OutboundLink")],1),t._v(" æ–‡æ¡£ï¼Œå…¶èµ·æºå¯è¿½æº¯åˆ°åŸå§‹ XMLHttpRequest å¯¹è±¡ï¼š")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" client "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nclient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GET"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nclient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withCredentials "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ä» "),a("code",[t._v("fetch")]),t._v(" æ–¹æ³•çš„æ–‡æ¡£ä¸­æˆ‘ä»¬äº†è§£åˆ°ï¼Œ XML ä¸­çš„ "),a("code",[t._v("withCredentials")]),t._v(" å±æ€§åœ¨ "),a("code",[t._v("fetch")]),t._v(" æ–¹æ³•çš„è°ƒç”¨ä¸­æ˜¯ä½œä¸ºä¸€ä¸ªå¯é€‰çš„å‚æ•°ä½¿ç”¨çš„ï¼š")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("credentials")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"include"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å¯é€‰çš„ "),a("code",[t._v("credentials")]),t._v(" å±æ€§å€¼ä¸º "),a("code",[t._v("omit")]),t._v("ã€"),a("code",[t._v("same-origin")]),t._v(" å’Œ "),a("code",[t._v("include")]),t._v("ã€‚åç«¯æœåŠ¡å¯ä»¥æ ¹æ®è¯·æ±‚ä¸­ä¸åŒçš„ "),a("code",[t._v("credentials")]),t._v(" å±æ€§å€¼ï¼Œå†³å®šæµè§ˆå™¨æ€æ ·æ˜¾ç¤ºå“åº”ï¼ˆé€šè¿‡ "),a("code",[t._v("Access-Control-Allow-Credentials")]),t._v(" å“åº”å¤´ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("Fetch API è¯´æ˜æ–‡æ¡£å°† CORS å’Œ "),a("code",[t._v("fetch")]),t._v(" API çš„äº¤äº’ä»¥åŠæµè§ˆå™¨æ‰€é‡‡ç”¨çš„å®‰å…¨æ€§æœºåˆ¶åšäº†è¯¦ç»†çš„"),a("a",{attrs:{href:"https://fetch.spec.whatwg.org/#cors-protocol-and-credentials",target:"_blank",rel:"noopener noreferrer"}},[t._v("åˆ’åˆ†ä¸è¯´æ˜"),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("h2",{attrs:{id:"ä¸€äº›æœ€ä½³å®è·µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€äº›æœ€ä½³å®è·µ"}},[t._v("#")]),t._v(" ä¸€äº›æœ€ä½³å®è·µ")]),t._v(" "),a("p",[t._v("åœ¨æ€»ç»“ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹è·¨æºèµ„æºå…±äº«ï¼ˆCORSï¼‰çš„ä¸€äº›æœ€ä½³å®è·µã€‚")]),t._v(" "),a("h3",{attrs:{id:"é¢å‘æµ·é‡ç”¨æˆ·"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é¢å‘æµ·é‡ç”¨æˆ·"}},[t._v("#")]),t._v(" é¢å‘æµ·é‡ç”¨æˆ·")]),t._v(" "),a("p",[t._v("ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯ï¼Œå¦‚æœä½ æ‹¥æœ‰ä¸€ä¸ªç½‘ç«™ï¼Œè¯¥ç½‘ç«™æ˜¾ç¤ºçš„å†…å®¹æ˜¯å…¬å¼€çš„ï¼Œå®ƒä¸éœ€è¦ç”¨æˆ·ä»˜è´¹ã€éªŒè¯èº«ä»½æˆ–æˆæƒåæ‰èƒ½æŸ¥çœ‹ â€”â€” è¿™ç§æƒ…å†µä¸‹ä½ å¯ä»¥é’ˆå¯¹è·å–è¿™äº›å†…å®¹çš„è¯·æ±‚è®¾ç½®å“åº”å¤´ "),a("code",[t._v("Access-Control-Allow-Origin: *")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ä¸‹åˆ—åœºæ™¯ä¸­å°†å€¼è®¾ä¸º "),a("code",[t._v("*")]),t._v(" ä¼šæ¯”è¾ƒå¥½ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å¤§é‡ç”¨æˆ·å¯ä»¥ä¸å—é™åˆ¶åœ°è®¿é—®æ­¤èµ„æº")]),t._v(" "),a("li",[t._v("æ­¤èµ„æºéœ€è¦ä¸å—é™åˆ¶åœ°è¢«å¤§é‡ç”¨æˆ·è®¿é—®")]),t._v(" "),a("li",[t._v("è®¿é—®èµ„æºçš„æºå’Œå®¢æˆ·ç«¯ç§ç±»ç¹å¤šï¼Œæ— æ³•è®¾ç½®ç‰¹å®šçš„å€¼ï¼Œæˆ–è€…ä½ æ ¹æœ¬ä¸åœ¨ä¹è·¨åŸŸè¯·æ±‚é€ æˆçš„é—®é¢˜")])]),t._v(" "),a("p",[t._v("å¦‚æœå°†æ­¤è®¾ç½®åº”ç”¨äºå“åº”ç§æœ‰ç½‘ç»œï¼ˆæ¯”å¦‚å—é˜²ç«å¢™ä¿æŠ¤ï¼Œæˆ–è€…éœ€è¦æŒ‚è½½ VPN æ‰å¯ä»¥è®¿é—®ï¼‰ä¸Šèµ„æºçš„è¯·æ±‚ï¼Œä¼šæœ‰ä¸€å®šçš„é£é™©ã€‚å½“ä½ é€šè¿‡ VPN è¿ä¸Šå…¬å¸çš„å†…ç½‘åï¼Œæœ‰äº†å†…ç½‘æ–‡ä»¶çš„è®¿é—®æƒé™ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://picbed.kimyang.cn/202109050835828.png",alt:"ç®€åŒ– VPNs è¿æ¥çš„ç¤ºä¾‹"}})]),t._v(" "),a("p",[t._v("ç°åœ¨ï¼Œå‡è®¾æ”»å‡»è€…çš„ç½‘ç«™ "),a("code",[t._v("dangerous.com")]),t._v(" ä¸Šæœ‰ä¸€ä¸ªè¿æ¥åˆ°å†…ç½‘æ–‡ä»¶çš„é“¾æ¥ï¼Œåˆ™ä»–ä»¬ï¼ˆç†è®ºä¸Šï¼‰å¯ä»¥åœ¨å…¶ç½‘ç«™ä¸Šåˆ›å»ºæœ‰è¯¥æ–‡ä»¶è®¿é—®æƒé™çš„è„šæœ¬ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://picbed.kimyang.cn/202109050835900.png",alt:"æ–‡ä»¶æ³„æ¼"}})]),t._v(" "),a("p",[t._v("è™½ç„¶å‘èµ·è¿™æ ·çš„æ”»å‡»å¾ˆéš¾ï¼Œå¹¶ä¸”éœ€è¦å¤§é‡æœ‰å…³ VPN åŠå…¶ä¸­å­˜å‚¨çš„æ–‡ä»¶çš„çŸ¥è¯†ï¼Œä½†æˆ‘ä»¬å¿…é¡»è¦æ„è¯†åˆ°è®¾ç½®ä¸º "),a("code",[t._v("Access-Control-Allow-Origin: *")]),t._v(" æ˜¯æœ‰æ½œåœ¨é£é™©çš„ã€‚")]),t._v(" "),a("h3",{attrs:{id:"é¢å‘å†…éƒ¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é¢å‘å†…éƒ¨"}},[t._v("#")]),t._v(" é¢å‘å†…éƒ¨")]),t._v(" "),a("p",[t._v("ç»§ç»­ä¸Šæ–‡çš„ä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦å¯¹è‡ªå·±çš„ç½‘ç«™è¿›è¡Œç»Ÿè®¡åˆ†æï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å€ŸåŠ©ç”¨æˆ·æµè§ˆå™¨å‘é€çš„ç›¸å…³æ•°æ®å»é‡‡é›†ç”¨æˆ·çš„ä½“éªŒå’Œè¡Œä¸ºã€‚")]),t._v(" "),a("p",[t._v("å¸¸è§çš„æ–¹æ³•æ˜¯å®šæœŸä½¿ç”¨ JavaScript ä»ç”¨æˆ·çš„æµè§ˆå™¨å‘èµ·å¼‚æ­¥è¯·æ±‚ã€‚åç«¯æœ‰ä¸ª API ç”¨æ¥æ¥æ”¶è¿™äº›è¯·æ±‚ï¼Œç„¶åè¿›è¡Œæ•°æ®ä¸Šçš„å­˜å‚¨å’Œå¤„ç†ã€‚")]),t._v(" "),a("p",[t._v("æ­¤ä¾‹ä¸­ï¼Œæˆ‘ä»¬çš„åç«¯ API æ˜¯å…¬å…±çš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä¸å¸Œæœ› "),a("strong",[t._v("ä»»ä½•")]),t._v(" ç½‘ç«™éƒ½å¯ä»¥å‘æˆ‘ä»¬çš„æ•°æ®é‡‡é›† API å‘é€æ•°æ®ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬åªå¯¹æ¥è‡ªæˆ‘ä»¬è‡ªå·±ç½‘ç«™ä¸Šçš„è¯·æ±‚æ„Ÿå…´è¶£ â€”â€” å°±æ˜¯è¿™æ ·ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://picbed.kimyang.cn/202109050835584.png",alt:""}})]),t._v(" "),a("p",[t._v("æ­¤ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°† API çš„å“åº”å¤´å±æ€§ "),a("code",[t._v("Access-Control-Allow-Origin")]),t._v(" å€¼è®¾ç½®ä¸ºæˆ‘ä»¬ç½‘ç«™çš„ URLã€‚è¿™æ ·çš„è¯æ¥è‡ªåˆ«çš„æºçš„è¯·æ±‚ä¼šè¢«æµè§ˆå™¨æ‹¦æˆªã€‚")]),t._v(" "),a("p",[t._v("å³ä½¿ç”¨æˆ·æˆ–åˆ«çš„ç½‘ç«™æ‹¼å‘½åœ°å¡æ•°æ®åˆ°æˆ‘ä»¬çš„ç»Ÿè®¡æ¥å£ï¼Œåœ¨ API èµ„æºå“åº”å¤´éƒ¨è®¾ç½®çš„ "),a("code",[t._v("Access-Control-Allow-Origin")]),t._v(" å±æ€§ä¹Ÿä¸ä¼šè®©è¯·æ±‚é€šè¿‡ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://picbed.kimyang.cn/202109050835824.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"è¯·æ±‚å¤´ä¸­-origin-å±æ€§å€¼ä¸º-null"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¯·æ±‚å¤´ä¸­-origin-å±æ€§å€¼ä¸º-null"}},[t._v("#")]),t._v(" è¯·æ±‚å¤´ä¸­ Origin å±æ€§å€¼ä¸º NUll")]),t._v(" "),a("p",[t._v("å¦ä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­æ˜¯ "),a("code",[t._v("null")]),t._v(" æºã€‚å½“ä½¿ç”¨æµè§ˆå™¨ç›´æ¥æ‰“å¼€ä¸€ä¸ªå¸¦æœ‰èµ„æºè¯·æ±‚çš„æœ¬åœ°æ–‡ä»¶æ—¶ï¼Œå°±ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚æ¯”å¦‚ï¼Œæ¥è‡ªæœ¬åœ°è®¡ç®—æœºä¸Šé™æ€æ–‡ä»¶ä¸­è¿è¡Œçš„æŸäº› JavaScript çš„è¯·æ±‚ä¼šå°†è¯·æ±‚å¤´ä¸­çš„ "),a("code",[t._v("Origin")]),t._v(" å±æ€§è®¾ç½®ä¸º "),a("code",[t._v("null")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬çš„æœåŠ¡ä¸å…è®¸ origin å€¼ä¸º "),a("code",[t._v("null")]),t._v(" çš„è¯·æ±‚è®¿é—®æˆ‘ä»¬çš„èµ„æºï¼Œé‚£ä¹ˆæ­¤ä¸¾å¯èƒ½ä¼šå½±å“åˆ°å¼€å‘äººå‘˜çš„æ•ˆç‡ã€‚åœ¨ä½ çš„ç½‘ç«™/äº§å“æ˜¯é¢å‘å¼€å‘äººå‘˜çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® "),a("code",[t._v("Access-Control-Allow-Origin")]),t._v(" æ¥å…è®¸è¿™ç§ç±»å‹çš„è·¨åŸŸè¯·æ±‚è®¿é—®èµ„æºã€‚")]),t._v(" "),a("h3",{attrs:{id:"å°½é‡é¿å…ä½¿ç”¨-cookies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å°½é‡é¿å…ä½¿ç”¨-cookies"}},[t._v("#")]),t._v(" å°½é‡é¿å…ä½¿ç”¨ cookies")]),t._v(" "),a("p",[t._v("ä¸Šæ–‡ä¸­æˆ‘ä»¬èŠåˆ°äº†åœ¨ä½¿ç”¨ "),a("code",[t._v("Access-Control-Allow-Credentials")]),t._v(" å­—æ®µçš„æ—¶å€™ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å…è®¸è¯·æ±‚ä¸­å¸¦ä¸Š cookies çš„ï¼Œåªéœ€è¦è®¾ç½®å“åº”å¤´ "),a("code",[t._v("Access-Control-Allow-Credentials: true")]),t._v(" å°±å¯ä»¥å…è®¸è·¨åŸŸè¯·æ±‚å‘é€ cookie äº†ã€‚è¿™ä¼šå‘ŠçŸ¥æµè§ˆå™¨åç«¯æœåŠ¡å…è®¸è·¨åŸŸè¯·æ±‚æºå¸¦è®¤è¯ä¿¡æ¯ï¼ˆæ¯”å¦‚ cookiesï¼‰ã€‚")]),t._v(" "),a("p",[t._v("å…è®¸å¹¶æ¥å—è·¨åŸŸ Cookie å¯èƒ½ä¼šæœ‰ä¸€å®šçš„é£é™©ã€‚æ­¤ä¸¾ä¼šå°†è‡ªèº«æš´éœ²ç»™æ½œåœ¨çš„æ”»å‡»åª’ä»‹ï¼Œæ‰€ä»¥åº”è¯¥åœ¨"),a("strong",[t._v("éå¸¸å¿…é¡»")]),t._v("çš„æ—¶å€™æ‰å¼€å¯å®ƒã€‚")]),t._v(" "),a("p",[t._v("å½“ä½ ç¡®åˆ‡çŸ¥é“å“ªäº›å®¢æˆ·ç«¯å°†è®¿é—®ä½ çš„æœåŠ¡å™¨æ—¶ï¼Œæ­¤æ—¶è·¨åŸŸ Cookie æ‰èƒ½å‘æŒ¥å…¶è‡ªèº«çš„ä»·å€¼ã€‚è¿™æ­£æ˜¯å½“å…è®¸è·¨åŸŸè¯·æ±‚æºå¸¦è®¤è¯ä¿¡æ¯æ—¶ï¼ŒCORS è§„åˆ™ä¸å…è®¸æˆ‘ä»¬è®¾ç½® "),a("code",[t._v("Access-Control-Allow-Origin: *")]),t._v(" çš„åŸå› ")]),t._v(" "),a("p",[t._v("å•çº¯ä»æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œ"),a("code",[t._v("Access-Control-Allow-Origin: *")]),t._v(" å’Œ "),a("code",[t._v("Access-Control-Allow-Credentials: true")]),t._v(" æ˜¯å¯ä»¥ç»„åˆèµ·æ¥ä½¿ç”¨çš„ï¼Œä¸è¿‡æ­¤ç§æƒ…å†µæ˜¯ä¸€ä¸ª"),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%8F%8D%E9%9D%A2%E6%A8%A1%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("åé¢æ¨¡å¼"),a("OutboundLink")],1),t._v("ï¼Œåº”è¯¥é¿å…è¿™æ ·ä½¿ç”¨ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœä½ å¸Œæœ›æœåŠ¡å¯ä»¥è¢«ä¸åŒçš„å®¢æˆ·ç«¯å’Œæºè®¿é—®ï¼Œåˆ™åº”è¯¥è€ƒè™‘å¼€å‘ä¸€ä¸ª API ç”Ÿæˆè®¤è¯ä¿¡æ¯ï¼ˆä½¿ç”¨åŸºäº token çš„èº«ä»½éªŒè¯ï¼‰è€Œä¸æ˜¯ä½¿ç”¨ Cookieã€‚ä½†æ˜¯ï¼Œå¦‚æœæ— æ³•é‡‡ç”¨ API æ–¹å¼è§£å†³é—®é¢˜ï¼Œé‚£ä¹ˆè¯·ç¡®ä¿ä½ é’ˆå¯¹è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰è¿›è¡Œäº†é˜²å¾¡ã€‚")]),t._v(" "),a("h2",{attrs:{id:"é™„åŠ é˜…è¯»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é™„åŠ é˜…è¯»"}},[t._v("#")]),t._v(" é™„åŠ é˜…è¯»")]),t._v(" "),a("p",[t._v("å¸Œæœ›è¿™ç¯‡ï¼ˆé•¿ï¼‰æ–‡ç« å¯ä»¥è®©ä½ å¯¹ CORS æœ‰æ¸…æ™°çš„è®¤çŸ¥ï¼ŒåŒ…æ‹¬å…¶åŸç†è¿˜æœ‰å…¶å­˜åœ¨çš„æ„ä¹‰ã€‚ä¸‹é¢æœ‰ä¸€éƒ¨åˆ†æ˜¯æœ¬æ–‡çš„å‚è€ƒé“¾æ¥ï¼Œè¿˜æœ‰ä¸€äº›æ˜¯æˆ‘ä¸ªäººè§‰å¾—å¾ˆæ£’çš„å…³äº CORS çš„æ–‡ç« ï¼š")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cross-Origin Resource Sharing (CORS)"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Access-Control-Allow-Credentials")]),t._v(" header"),a("OutboundLink")],1),t._v(" on MDN Web Docs")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.moesif.com/blog/technical/cors/Authoritative-Guide-to-CORS-Cross-Origin-Resource-Sharing-for-REST-APIs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Authoritative guide to CORS (Cross-Origin Resource Sharing) for REST APIs"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("The "),a("a",{attrs:{href:"https://fetch.spec.whatwg.org/#http-cors-protocol",target:"_blank",rel:"noopener noreferrer"}},[t._v("â€œCORS protocolâ€ section"),a("OutboundLink")],1),t._v(" of the "),a("a",{attrs:{href:"https://fetch.spec.whatwg.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fetch API spec"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy",target:"_blank",rel:"noopener noreferrer"}},[t._v("Same-origin policy"),a("OutboundLink")],1),t._v(" on MDN Web Docs")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://stackoverflow.com/users/19068/quentin",target:"_blank",rel:"noopener noreferrer"}},[t._v("Quentinâ€™s"),a("OutboundLink")],1),t._v(" great "),a("a",{attrs:{href:"https://stackoverflow.com/a/35553666",target:"_blank",rel:"noopener noreferrer"}},[t._v("summary of CORS"),a("OutboundLink")],1),t._v(" on StackOverflow")])]),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[t._v("åŸæ–‡åœ°å€ï¼š"),a("a",{attrs:{href:"https://ieftimov.com/post/deep-dive-cors-history-how-it-works-best-practices/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Deep dive in CORS: History, how it works, and best practices"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("åŸæ–‡ä½œè€…ï¼š"),a("a",{attrs:{href:"https://ieftimov.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ilija Eftimov"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("è¯‘æ–‡å‡ºè‡ªï¼š"),a("a",{attrs:{href:"https://github.com/xitu/gold-miner",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ˜é‡‘ç¿»è¯‘è®¡åˆ’"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š"),a("a",{attrs:{href:"https://github.com/xitu/gold-miner/blob/master/article/2021/deep-dive-cors-history-how-it-works-best-practices.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/xitu/gold-miner/blob/master/article/2021/deep-dive-cors-history-how-it-works-best-practices.md"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("è¯‘è€…ï¼š"),a("a",{attrs:{href:"https://github.com/snowyYU",target:"_blank",rel:"noopener noreferrer"}},[t._v("snowyYU"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("æ ¡å¯¹è€…ï¼š"),a("a",{attrs:{href:"https://github.com/Kimhooo",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kimhooo"),a("OutboundLink")],1),t._v("ã€"),a("a",{attrs:{href:"https://github.com/Chorer",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chorer"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);