<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="Kim Yang">
  
  
  
  <link rel="prev" href="https://KimYangOfCat.github.io/2019/2019-06-01-swiftlearning1/" />
  <link rel="next" href="https://KimYangOfCat.github.io/2019/2019-08-01-macbookpro/" />
  <link rel="canonical" href="https://KimYangOfCat.github.io/2019/2019-06-07-swiftlearning2/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           MVC | Kim`s Blog
       
  </title>
  <meta name="title" content="MVC | Kim`s Blog">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/KimYangOfCat.github.io"
    },
    "articleSection" : "posts",
    "name" : "MVC",
    "headline" : "MVC",
    "description" : "这是学习swift的笔记系列，学习的课程是斯坦福 iOS11 swift语言。 学习swift的笔记(一)：introduction to iOS11, Xcode 9 and Swift 4 今天学习",
    "inLanguage" : "zh-cn",
    "author" : "Kim Yang",
    "creator" : "Kim Yang",
    "publisher": "Kim Yang",
    "accountablePerson" : "Kim Yang",
    "copyrightHolder" : "Kim Yang",
    "copyrightYear" : "2019",
    "datePublished": "2019-06-07 23:23:09 \x2b0800 \x2b0800",
    "dateModified" : "2019-06-07 23:23:09 \x2b0800 \x2b0800",
    "url" : "https:\/\/KimYangOfCat.github.io\/2019\/2019-06-07-swiftlearning2\/",
    "wordCount" : "1958",
    "keywords" : [ "Swift","iOS", "Kim`s Blog"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://KimYangOfCat.github.io">Kim`s Blog</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://KimYangOfCat.github.io">Kim`s Blog</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">MVC</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://KimYangOfCat.github.io" rel="author">Kim Yang</a> with ♥ 
                <span class="post-time">
                on <time datetime=2019-06-07 itemprop="datePublished">June 7, 2019</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          <p>这是学习swift的笔记系列，学习的课程是<a href="https://www.bilibili.com/medialist/play/ml148451180" rel="nofollow noreferrer" target="_blank">斯坦福  iOS11 swift语言</a>。</p>

<p>学习swift的笔记(一)：<a href="https://kimyang.cn/2019/2019-06-01-swiftlearning1/" rel="nofollow noreferrer" target="_blank"><strong>introduction to iOS11, Xcode 9 and Swift 4</strong></a></p>

<p>今天学习的是课程的第二集：<a href="https://www.bilibili.com/video/av16339375/?p=2" rel="nofollow noreferrer" target="_blank"><strong>MVC</strong></a></p>

<p>这一节主要讲的就是MVC(Model View Controller)开发模式,这种开发模式主要包含以下三部分：
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/p5.png" alt="Three Maps" class="lazyload"><figcaption class="image-caption">Three Maps</figcaption></figure></p>

<p>Model 中包含程序的规则，知道程序能做什么，但不知道如何显示给用户看。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190607220048.png" alt="model" class="lazyload"><figcaption class="image-caption">model</figcaption></figure></p>

<p>那么如何将 odel 做的事情显示给用户看就是 Controlller 的职责了。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609133259.png" alt="Controller" class="lazyload"><figcaption class="image-caption">Controller</figcaption></figure></p>

<p>View 是 Controller 的下属，它们是通用的 UI 组件。可以简单理解成View 是 Controller 显示 Model 所做的结果的容器或工具。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609141156.png" alt="View" class="lazyload"><figcaption class="image-caption">View</figcaption></figure></p>

<p>在了解了 MVC 的三部分是什么之后，我们最需要了解的就是这三者之间是怎样进行通讯的，以便我们去了解整个 MVC 的工作过程。</p>

<ul>
<li><p>Controllers can always talk directly to their model
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609142317.png" alt="控制器可以直接访问模型" class="lazyload"><figcaption class="image-caption">控制器可以直接访问模型</figcaption></figure>
控制器可以直接访问模型是必须的，因为它的工作就是和模型沟通：“需要我(Controller)帮你(Medol)显示什么样的结果吗？“</p></li>

<li><p>Controllers can also talk directly to their View
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609143208.png" alt="控制器也可以直接访问视图" class="lazyload"><figcaption class="image-caption">控制器也可以直接访问视图</figcaption></figure>
因为之前说过 View 是 Controller 的下属，所以能够直接访问也是理所当然的。</p></li>

<li><p>The Model and View should never speak to each other
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609143722.png" alt="模型与视图不可互通" class="lazyload"><figcaption class="image-caption">模型与视图不可互通</figcaption></figure>
试想如果模型与试图可以互通，那还有控制器的事儿吗？从专业的角度来解释，有两个原因：其一，模型与 UI 无关， 而视图只负责显示 UI ， 你看它俩都没有共同话题，这能沟通吗？其二，视图都是通用的，通用的 UI 组件如何能知道特定的APP能做些什么事情尼？所以，模型与视图是不可以互相沟通的。</p></li>

<li><p>Can the View speak to its Controller?
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609145119.png" alt="视图能否通知控制器呢？" class="lazyload"><figcaption class="image-caption">视图能否通知控制器呢？</figcaption></figure>
那么视图能否通知控制器呢？这个问题的答案是肯定的。从某些时候来说这是必须的，比如”按钮被按下“的时候，他们必须得交流，而且这种交流必须得是某种标准化的匿名通讯机制。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609145939.png" alt="标准化的匿名通讯" class="lazyload"><figcaption class="image-caption">标准化的匿名通讯</figcaption></figure>
那为什么得是匿名的呢？因为视图(View)是通用的对象呀。当 View 通知 Controller 时，它不应该知道这个按钮是做甚什么的，它知道的应该是这只是一个按钮。它通知给控制器的不应该是：“发送按钮被按下了！”，而是：“这里有个按钮被按下了！”，所以为了保证 View 的通用性，View 和  Controller之间的通讯只能是标准化的匿名机制。那如何实现这样的标准化匿名机制呢？有一种名叫 Target-Action 的匿名通讯机制，其原理如下：
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609144836.png" alt="控制器中设立一个 Target" class="lazyload"><figcaption class="image-caption">控制器中设立一个 Target</figcaption></figure>
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609151058.png" alt="视图中设立一种 Action" class="lazyload"><figcaption class="image-caption">视图中设立一种 Action</figcaption></figure>
可以简单理解成，控制器中有一个名为 target 的方法，视图中有一个名为 action 的方法，每当有一个按钮按下，按钮就会获得 action 方法，然后通过它向 target 发送某个按钮被按下的具体信息，然后由 target 方法去通知控制器。这样理解起来是不是很简单？这本身就是一种很简单的匿名通讯机制。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609152110.png" alt="target-action" class="lazyload"><figcaption class="image-caption">target-action</figcaption></figure>
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609152740.png" alt="更复杂的通讯怎么办？" class="lazyload"><figcaption class="image-caption">更复杂的通讯怎么办？</figcaption></figure>
但是有时候 View 需要给 Controller 通知更复杂的信息时候，比如，一个可以滚动上下的视窗，那么上边简单通讯可能就不能胜任了。因为滚动视窗总是要问控制器很多问题，例如：我滚到到底部了，我还能往下边滚动吗？我横着滚动还是竖着滚动？这些问题的开头大多时候也是如图中所示的should，will，did！那就需要用到更复杂的匿名通讯机制——Delegate(代理)。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609153100.png" alt="Delegate" class="lazyload"><figcaption class="image-caption">Delegate</figcaption></figure>
在滚动视图里面有一个变量，这个变量存储着一个对象，这个对象能够响应一定数量的某些方法，然后控制器通过protocol协议与视图交流。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609153814.png" alt="Protocol" class="lazyload"><figcaption class="image-caption">Protocol</figcaption></figure>
protocol协议，后面再进行分享。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609154321.png" alt="View don't own data" class="lazyload"><figcaption class="image-caption">View don't own data</figcaption></figure>
接下来再来了解另一种代理（data source），View 本身并没有任何数据，它所展示的数据必定有一个来源。那么它的来源是什么？Model？
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609154159.png" alt="Data source" class="lazyload"><figcaption class="image-caption">Data source</figcaption></figure>
通过之前的了解，我们可能会误以为 Model 是 View 的数据来源，但其实并不是这样的，View显示的数据的直接来源是 Controller，控制器通过访问模型来获取 View 需要的数据。例如一个上下翻动的列表，每当用户上翻的时候，列表就会不断地问控制器：“接下来的列表中的数据是什么呀？”，然后控制器就会去问模型：“列表接下去所需要的数据内容是什么？“，然后模型就会屁颠屁颠地去查数据库，去看接下去的数据是什么！本质上来看数据源和代理其实是类似的，他们方法的不同取决于不同的 UI 组件。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609164337.png" alt="控制器的作用" class="lazyload"><figcaption class="image-caption">控制器的作用</figcaption></figure>
接下来我们说说控制器的作用吧！通过对 View 与 Conller 交流过程的了解，我们也能感受到了控制器的关键！总结一下，控制器的作用就是将模型的信息转化为某种格式，然后提供给视图，这就是它的主要的作用；同理反向的它也要处理，把视图中的用户交互翻译成模型中的数据。它负责来回的通讯，是所有交流的中心！</p></li>

<li><p>Can the Model talk directly to the Controller？
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609164916.png" alt="模型能直接通知控制器吗？" class="lazyload"><figcaption class="image-caption">模型能直接通知控制器吗？</figcaption></figure>
能通知，但是肯定不是直接的。因为模型与 UI 无关，而控制器从根本上讲是取决于 UI 的，所以不能直接沟通。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609165252.png" alt="NO" class="lazyload"><figcaption class="image-caption">NO</figcaption></figure>
但是有一种方法，让模型能在数据发生改变时给控制器发出通知，好让与之有关的 UI 及时更新数据。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609165626.png" alt="Radio Station" class="lazyload"><figcaption class="image-caption">Radio Station</figcaption></figure>
这种方法被称作电台模式。模型在某个已知的电台上开始广播，而控制器就会收听这个电台，当听到模型电台说数据发生改变的时候，控制器就主动去问模型发生了什么改变，以此来获取改变的主要内容。
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609165934.png" alt="KVO" class="lazyload"><figcaption class="image-caption">KVO</figcaption></figure>
这种模式在 iOS  被叫做通知(notification)或者键值监听(KVO,Key Value Observing)</p></li>
</ul>

<p>我们了解了一个单一的 MVC 的工作过程，但我们手机中的 APP 肯定不止一个 View，那么多个MVC是如何工作在一起的呢？
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609170830.png" alt="MVCs" class="lazyload"><figcaption class="image-caption">MVCs</figcaption></figure>
上图是正确的MVC组织状态，而非下图中全是绿色的通道！
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://blog-img-1256389522.cos.ap-beijing.myqcloud.com/SwiftLearning/20190609171255.png" alt="NOT MVCs" class="lazyload"><figcaption class="image-caption">NOT MVCs</figcaption></figure></p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Kim Yang </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://KimYangOfCat.github.io/2019/2019-06-07-swiftlearning2/>https://KimYangOfCat.github.io/2019/2019-06-07-swiftlearning2/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://KimYangOfCat.github.io/tags/swift/">
                    #Swift</a></span>
            
            <span class="tag"><a href="https://KimYangOfCat.github.io/tags/ios/">
                    #iOS</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://KimYangOfCat.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://KimYangOfCat.github.io/2019/2019-06-01-swiftlearning1/" class="prev" rel="prev" title="Introduction to iOS11, Xcode 9 and Swift 4"><i class="iconfont icon-left"></i>&nbsp;Introduction to iOS11, Xcode 9 and Swift 4</a>
         
        
        <a href="https://KimYangOfCat.github.io/2019/2019-08-01-macbookpro/" class="next" rel="next" title="为什么你值得入手一个 Macbook？">为什么你值得入手一个 Macbook？&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2019</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://KimYangOfCat.github.io">Kim Yang</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
